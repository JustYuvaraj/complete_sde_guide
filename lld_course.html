<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LLD Mastery ‚Äî From Zero to FAANG</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap');
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a28;--bg4:#22223a;--accent:#6c5ce7;--accent2:#a29bfe;--accent3:#00cec9;--text:#e8e8f0;--text2:#9999b0;--text3:#666680;--green:#00b894;--red:#ff6b6b;--orange:#fdcb6e;--blue:#74b9ff;--border:#2a2a40;--card:#15152a;--glow:0 0 20px rgba(108,92,231,0.3)}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;overflow:hidden}
/* Sidebar */
.sidebar{width:320px;background:var(--bg2);border-right:1px solid var(--border);display:flex;flex-direction:column;height:100vh;flex-shrink:0;overflow:hidden}
.sidebar-header{padding:24px 20px;border-bottom:1px solid var(--border);text-align:center}
.sidebar-header h1{font-size:20px;font-weight:800;background:linear-gradient(135deg,var(--accent),var(--accent3));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
.sidebar-header p{font-size:11px;color:var(--text2);margin-top:4px;letter-spacing:1px;text-transform:uppercase}
.progress-bar-container{padding:12px 20px;border-bottom:1px solid var(--border)}
.progress-bar{height:6px;background:var(--bg4);border-radius:3px;overflow:hidden}
.progress-bar-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent3));border-radius:3px;transition:width .5s ease;width:0%}
.progress-text{font-size:11px;color:var(--text2);margin-top:6px;text-align:center}
.nav-list{flex:1;overflow-y:auto;padding:12px 0}
.nav-list::-webkit-scrollbar{width:4px}
.nav-list::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:2px}
.nav-module{margin-bottom:4px}
.nav-module-header{display:flex;align-items:center;gap:10px;padding:10px 20px;cursor:pointer;font-size:13px;font-weight:600;color:var(--text2);transition:all .2s;user-select:none}
.nav-module-header:hover{color:var(--text);background:var(--bg3)}
.nav-module-header.active{color:var(--accent2)}
.nav-module-header .arrow{font-size:10px;transition:transform .2s}
.nav-module-header.expanded .arrow{transform:rotate(90deg)}
.nav-module-header .mod-num{background:var(--bg4);color:var(--accent2);border-radius:4px;padding:2px 7px;font-size:10px;font-weight:700;font-family:'JetBrains Mono',monospace}
.nav-items{display:none;padding:2px 0}
.nav-items.show{display:block}
.nav-item{display:flex;align-items:center;gap:8px;padding:7px 20px 7px 48px;cursor:pointer;font-size:12px;color:var(--text3);transition:all .2s;border-left:2px solid transparent}
.nav-item:hover{color:var(--text);background:rgba(108,92,231,0.05)}
.nav-item.active{color:var(--accent2);border-left-color:var(--accent);background:rgba(108,92,231,0.08)}
.nav-item.completed{color:var(--green)}
.nav-item .check{width:14px;height:14px;border:1.5px solid var(--text3);border-radius:3px;display:flex;align-items:center;justify-content:center;font-size:9px;flex-shrink:0;cursor:pointer;transition:all .2s}
.nav-item.completed .check{background:var(--green);border-color:var(--green);color:#fff}
/* Main */
.main{flex:1;overflow-y:auto;height:100vh}
.main::-webkit-scrollbar{width:6px}
.main::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:3px}
.content-area{max-width:900px;margin:0 auto;padding:40px 48px 80px}
.module-badge{display:inline-block;background:linear-gradient(135deg,var(--accent),var(--accent3));color:#fff;padding:4px 14px;border-radius:20px;font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:12px}
.content-area h2{font-size:32px;font-weight:800;margin-bottom:8px;line-height:1.2}
.content-area h3{font-size:22px;font-weight:700;margin:36px 0 16px;color:var(--accent2);padding-bottom:8px;border-bottom:1px solid var(--border)}
.content-area h4{font-size:17px;font-weight:600;margin:24px 0 12px;color:var(--text)}
.content-area p{font-size:15px;line-height:1.8;color:var(--text2);margin-bottom:14px}
.content-area ul,.content-area ol{margin:8px 0 16px 24px;color:var(--text2);font-size:14px;line-height:2}
.content-area li{margin-bottom:4px}
.content-area strong{color:var(--text);font-weight:600}
.content-area em{color:var(--accent2);font-style:normal}
/* Code blocks */
pre{background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:20px;margin:14px 0 20px;overflow-x:auto;position:relative}
pre code{font-family:'JetBrains Mono',monospace;font-size:13px;line-height:1.7;color:var(--text)}
code{font-family:'JetBrains Mono',monospace;background:var(--bg3);padding:2px 6px;border-radius:4px;font-size:13px;color:var(--accent2)}
/* Keyword highlighting */
.kw{color:#c792ea;font-weight:600} /* keywords */
.tp{color:#ffcb6b} /* types */
.fn{color:#82aaff} /* functions */
.st{color:#c3e88d} /* strings */
.cm{color:#546e7a;font-style:italic} /* comments */
.nu{color:#f78c6c} /* numbers */
.an{color:#f07178} /* annotations */
/* Callout boxes */
.callout{padding:16px 20px;border-radius:10px;margin:16px 0;font-size:14px;line-height:1.7}
.callout-title{font-weight:700;margin-bottom:6px;font-size:13px;text-transform:uppercase;letter-spacing:.5px}
.callout.tip{background:rgba(0,206,201,0.08);border-left:3px solid var(--accent3);color:var(--accent3)}
.callout.warn{background:rgba(253,203,110,0.08);border-left:3px solid var(--orange);color:var(--orange)}
.callout.important{background:rgba(108,92,231,0.08);border-left:3px solid var(--accent);color:var(--accent2)}
.callout.interview{background:rgba(0,184,148,0.08);border-left:3px solid var(--green);color:var(--green)}
.callout p{color:inherit;margin:0}
/* Comparison table */
table{width:100%;border-collapse:collapse;margin:16px 0;font-size:13px}
th{background:var(--bg4);color:var(--accent2);padding:10px 14px;text-align:left;font-weight:600;border:1px solid var(--border)}
td{padding:10px 14px;border:1px solid var(--border);color:var(--text2)}
tr:hover td{background:rgba(108,92,231,0.04)}
/* Section divider */
.section-divider{height:1px;background:linear-gradient(90deg,transparent,var(--border),transparent);margin:40px 0}
/* Hidden sections */
.topic-section{display:none}
.topic-section.active{display:block}
/* Responsive */
@media(max-width:900px){.sidebar{width:260px}.content-area{padding:24px}}
@media(max-width:600px){.sidebar{position:fixed;left:-320px;z-index:100;transition:left .3s}.sidebar.open{left:0}.content-area{padding:16px}}
/* UML diagram style */
.uml-box{background:var(--bg3);border:2px solid var(--accent);border-radius:8px;padding:0;margin:16px 0;display:inline-block;min-width:280px;font-family:'JetBrains Mono',monospace;font-size:12px}
.uml-box .uml-title{background:var(--accent);color:#fff;padding:8px 16px;text-align:center;font-weight:700;font-size:13px}
.uml-box .uml-section{padding:8px 16px;border-top:1px solid var(--border)}
.uml-box .uml-section:first-of-type{border-top:none}
.uml-arrow{color:var(--accent2);font-family:'JetBrains Mono',monospace;text-align:center;padding:8px;font-size:14px}
/* Mobile menu toggle */
.mobile-toggle{display:none;position:fixed;top:12px;left:12px;z-index:200;background:var(--accent);color:#fff;border:none;border-radius:8px;width:40px;height:40px;font-size:20px;cursor:pointer}
@media(max-width:600px){.mobile-toggle{display:flex;align-items:center;justify-content:center}}
</style>
</head>
<body>
<button class="mobile-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">‚ò∞</button>
<div class="sidebar">
  <div class="sidebar-header">
    <h1>‚ö° LLD Mastery</h1>
    <p>From Zero to FAANG</p>
  </div>
  <div class="progress-bar-container">
    <div class="progress-bar"><div class="progress-bar-fill" id="progressFill"></div></div>
    <div class="progress-text" id="progressText">0% Complete</div>
  </div>
  <div class="nav-list" id="navList"></div>
</div>
<div class="main">
  <div class="content-area" id="contentArea">
  </div>
</div>

<script>
// ===== COURSE DATA =====
const COURSE = [
// ============================================================
// MODULE 1: JAVA FROM ABSOLUTE ZERO
// ============================================================
{
  title: "Java from Zero",
  topics: [
    {
      title: "What is Java & Hello World",
      content: `
<h3>What is Java?</h3>
<p>Java is a <strong>programming language</strong> ‚Äî a way to give instructions to a computer. Think of it as learning a new language (like English), but instead of talking to humans, you're talking to a machine.</p>

<div class="callout important"><div class="callout-title">Why Java for LLD?</div><p>Almost every FAANG LLD interview accepts (and prefers) Java. Its strong OOP support makes designs clean and readable. All LLD resources, books, and examples use Java.</p></div>

<h4>Your First Java Program</h4>
<pre><code><span class="cm">// Every Java program starts with a class</span>
<span class="kw">public class</span> <span class="tp">HelloWorld</span> {

    <span class="cm">// main() is where the program starts running</span>
    <span class="kw">public static void</span> <span class="fn">main</span>(String[] args) {
        System.out.println(<span class="st">"Hello, World!"</span>);  <span class="cm">// prints to screen</span>
    }
}</code></pre>

<h4>Breaking it Down ‚Äî Line by Line</h4>
<table>
<tr><th>Code</th><th>What it means</th></tr>
<tr><td><code>public class HelloWorld</code></td><td>Creates a "blueprint" called HelloWorld. Every Java file needs at least one class.</td></tr>
<tr><td><code>public static void main(...)</code></td><td>The starting point. Java always looks for this exact method to begin.</td></tr>
<tr><td><code>System.out.println(...)</code></td><td>Prints text to the screen. Like <code>console.log</code> in JS or <code>print</code> in Python.</td></tr>
<tr><td><code>{ }</code></td><td>Curly braces define where a block of code begins and ends.</td></tr>
<tr><td><code>;</code></td><td>Every statement ends with a semicolon. Java is strict about this!</td></tr>
</table>

<h3>Variables ‚Äî Storing Data</h3>
<p>A <strong>variable</strong> is a labeled box that stores a value. In Java, you must say <em>what type</em> of data the box holds.</p>

<pre><code><span class="kw">int</span> age = <span class="nu">25</span>;              <span class="cm">// whole number</span>
<span class="kw">double</span> salary = <span class="nu">75000.50</span>;   <span class="cm">// decimal number</span>
<span class="kw">boolean</span> isHired = <span class="kw">true</span>;     <span class="cm">// true or false</span>
String name = <span class="st">"Alice"</span>;      <span class="cm">// text (note: capital S)</span>
<span class="kw">char</span> grade = <span class="st">'A'</span>;           <span class="cm">// single character</span></code></pre>

<div class="callout tip"><div class="callout-title">Key Rule</div><p>Java is <strong>statically typed</strong> ‚Äî once you say <code>int age</code>, you can ONLY put whole numbers into <code>age</code>. You can't suddenly put "hello" into it. This catches bugs early!</p></div>

<h3>If-Else ‚Äî Making Decisions</h3>
<pre><code><span class="kw">int</span> marks = <span class="nu">85</span>;

<span class="kw">if</span> (marks >= <span class="nu">90</span>) {
    System.out.println(<span class="st">"Grade A"</span>);
} <span class="kw">else if</span> (marks >= <span class="nu">70</span>) {
    System.out.println(<span class="st">"Grade B"</span>);   <span class="cm">// ‚Üê This prints</span>
} <span class="kw">else</span> {
    System.out.println(<span class="st">"Grade C"</span>);
}</code></pre>

<h3>Loops ‚Äî Repeating Things</h3>
<pre><code><span class="cm">// For loop: repeat 5 times</span>
<span class="kw">for</span> (<span class="kw">int</span> i = <span class="nu">0</span>; i < <span class="nu">5</span>; i++) {
    System.out.println(<span class="st">"Count: "</span> + i);
}

<span class="cm">// While loop: repeat while condition is true</span>
<span class="kw">int</span> count = <span class="nu">0</span>;
<span class="kw">while</span> (count < <span class="nu">3</span>) {
    System.out.println(<span class="st">"Hello!"</span>);
    count++;
}</code></pre>

<h3>Arrays ‚Äî Storing Multiple Values</h3>
<pre><code><span class="cm">// Array = fixed-size list of same type</span>
<span class="kw">int</span>[] numbers = {<span class="nu">10</span>, <span class="nu">20</span>, <span class="nu">30</span>, <span class="nu">40</span>};
System.out.println(numbers[<span class="nu">0</span>]);  <span class="cm">// prints 10 (index starts at 0)</span>
System.out.println(numbers.length); <span class="cm">// prints 4</span>

<span class="cm">// Loop through array</span>
<span class="kw">for</span> (<span class="kw">int</span> num : numbers) {
    System.out.println(num);
}</code></pre>
`
    },
    {
      title: "Methods (Functions)",
      content: `
<h3>What is a Method?</h3>
<p>A <strong>method</strong> is a reusable block of code that performs a specific task. Think of it as a recipe ‚Äî you write it once, and use it whenever you need it.</p>

<pre><code><span class="cm">// Defining a method</span>
<span class="kw">public static int</span> <span class="fn">add</span>(<span class="kw">int</span> a, <span class="kw">int</span> b) {
    <span class="kw">return</span> a + b;
}

<span class="cm">// Using (calling) the method</span>
<span class="kw">int</span> result = <span class="fn">add</span>(<span class="nu">5</span>, <span class="nu">3</span>);  <span class="cm">// result = 8</span></code></pre>

<h4>Anatomy of a Method</h4>
<pre><code><span class="cm">//  access    return-type   name     parameters</span>
<span class="cm">//    ‚Üì          ‚Üì          ‚Üì          ‚Üì</span>
    <span class="kw">public</span>      <span class="kw">int</span>        <span class="fn">add</span>    (<span class="kw">int</span> a, <span class="kw">int</span> b) {
        <span class="kw">return</span> a + b;  <span class="cm">// what the method gives back</span>
    }</code></pre>

<table>
<tr><th>Part</th><th>What it means</th></tr>
<tr><td><code>public</code></td><td>Anyone can use this method</td></tr>
<tr><td><code>int</code></td><td>This method returns a whole number</td></tr>
<tr><td><code>void</code></td><td>This method returns NOTHING (just does an action)</td></tr>
<tr><td><code>Parameters</code></td><td>Inputs the method needs to work</td></tr>
<tr><td><code>return</code></td><td>Sends a value back to whoever called the method</td></tr>
</table>

<h4>void Methods ‚Äî No Return Value</h4>
<pre><code><span class="kw">public static void</span> <span class="fn">greet</span>(String name) {
    System.out.println(<span class="st">"Hello, "</span> + name + <span class="st">"!"</span>);
    <span class="cm">// no return statement needed</span>
}

<span class="fn">greet</span>(<span class="st">"Alice"</span>);  <span class="cm">// prints: Hello, Alice!</span></code></pre>

<div class="callout interview"><div class="callout-title">üéØ Why This Matters for LLD</div><p>In LLD, every class has methods. You'll design methods like <code>parkCar()</code>, <code>bookTicket()</code>, <code>processPayment()</code>. Understanding parameters, return types, and access modifiers is CRITICAL.</p></div>
`
    },
    {
      title: "Classes & Objects ‚Äî The Foundation",
      content: `
<h3>The Most Important Concept</h3>
<p><strong>LLD is ALL about classes and objects.</strong> If you understand this one topic deeply, you're 50% done. Everything in LLD ‚Äî every design pattern, every system design ‚Äî is about how classes talk to each other.</p>

<h4>Real-World Analogy</h4>
<p>Think of a <strong>Class</strong> as a <em>blueprint</em> of a house. Think of an <strong>Object</strong> as an <em>actual house</em> built from that blueprint. One blueprint ‚Üí many houses.</p>

<pre><code><span class="cm">// CLASS = Blueprint</span>
<span class="kw">class</span> <span class="tp">Car</span> {
    <span class="cm">// Properties (what the car HAS)</span>
    String brand;
    String color;
    <span class="kw">int</span> speed;

    <span class="cm">// Behavior (what the car DOES)</span>
    <span class="kw">void</span> <span class="fn">accelerate</span>() {
        speed += <span class="nu">10</span>;
        System.out.println(brand + <span class="st">" speed: "</span> + speed);
    }

    <span class="kw">void</span> <span class="fn">brake</span>() {
        speed -= <span class="nu">10</span>;
        System.out.println(brand + <span class="st">" speed: "</span> + speed);
    }
}

<span class="cm">// OBJECT = Actual car built from the blueprint</span>
<span class="kw">public class</span> <span class="tp">Main</span> {
    <span class="kw">public static void</span> <span class="fn">main</span>(String[] args) {
        Car myCar = <span class="kw">new</span> Car();     <span class="cm">// Create object</span>
        myCar.brand = <span class="st">"Tesla"</span>;      <span class="cm">// Set properties</span>
        myCar.color = <span class="st">"Red"</span>;
        myCar.speed = <span class="nu">0</span>;

        myCar.<span class="fn">accelerate</span>();  <span class="cm">// Tesla speed: 10</span>
        myCar.<span class="fn">accelerate</span>();  <span class="cm">// Tesla speed: 20</span>
        myCar.<span class="fn">brake</span>();       <span class="cm">// Tesla speed: 10</span>
    }
}</code></pre>

<h3>Constructors ‚Äî Building Objects Properly</h3>
<p>A <strong>constructor</strong> is a special method that runs automatically when you create an object. It sets up the initial state.</p>

<pre><code><span class="kw">class</span> <span class="tp">Car</span> {
    String brand;
    String color;
    <span class="kw">int</span> speed;

    <span class="cm">// Constructor ‚Äî same name as class, no return type</span>
    <span class="tp">Car</span>(String brand, String color) {
        <span class="kw">this</span>.brand = brand;   <span class="cm">// 'this' = this object being created</span>
        <span class="kw">this</span>.color = color;
        <span class="kw">this</span>.speed = <span class="nu">0</span>;       <span class="cm">// default speed</span>
    }
}

<span class="cm">// Now creating objects is clean:</span>
Car tesla = <span class="kw">new</span> Car(<span class="st">"Tesla"</span>, <span class="st">"Red"</span>);
Car bmw = <span class="kw">new</span> Car(<span class="st">"BMW"</span>, <span class="st">"Black"</span>);</code></pre>

<div class="callout important"><div class="callout-title">The 'this' keyword</div><p><code>this</code> refers to the current object. When parameter name and field name are same (both called <code>brand</code>), use <code>this.brand</code> to mean "the object's brand" and just <code>brand</code> for "the parameter".</p></div>

<h3>Static vs Non-Static</h3>
<table>
<tr><th>Non-Static (Instance)</th><th>Static (Class-level)</th></tr>
<tr><td>Belongs to each object</td><td>Belongs to the class itself</td></tr>
<tr><td>Different for every object</td><td>Same for ALL objects</td></tr>
<tr><td><code>myCar.speed</code></td><td><code>Car.totalCars</code></td></tr>
</table>

<pre><code><span class="kw">class</span> <span class="tp">Car</span> {
    String brand;              <span class="cm">// instance: each car has own brand</span>
    <span class="kw">static int</span> totalCars = <span class="nu">0</span>;  <span class="cm">// static: shared across ALL cars</span>

    <span class="tp">Car</span>(String brand) {
        <span class="kw">this</span>.brand = brand;
        totalCars++;           <span class="cm">// every new car increments the count</span>
    }
}
<span class="cm">// Car.totalCars ‚Üí keeps track of how many cars exist</span></code></pre>
`
    },
    {
      title: "The 4 Pillars of OOP",
      content: `
<h3>The 4 Pillars ‚Äî The DNA of LLD</h3>
<p>Every LLD interview tests your understanding of these 4 concepts. They are the foundation of everything.</p>

<h3>Pillar 1: Encapsulation</h3>
<p><strong>Meaning:</strong> Hide internal details, expose only what's necessary. Like a TV remote ‚Äî you press buttons (public interface) but don't see the circuit board (private internals).</p>

<pre><code><span class="kw">class</span> <span class="tp">BankAccount</span> {
    <span class="kw">private double</span> balance;  <span class="cm">// PRIVATE: nobody can touch this directly</span>

    <span class="kw">public</span> <span class="tp">BankAccount</span>(<span class="kw">double</span> initialBalance) {
        <span class="kw">this</span>.balance = initialBalance;
    }

    <span class="cm">// Public methods = controlled access</span>
    <span class="kw">public void</span> <span class="fn">deposit</span>(<span class="kw">double</span> amount) {
        <span class="kw">if</span> (amount > <span class="nu">0</span>) {
            balance += amount;  <span class="cm">// validation before modifying</span>
        }
    }

    <span class="kw">public boolean</span> <span class="fn">withdraw</span>(<span class="kw">double</span> amount) {
        <span class="kw">if</span> (amount > <span class="nu">0</span> && amount <= balance) {
            balance -= amount;
            <span class="kw">return true</span>;
        }
        <span class="kw">return false</span>;  <span class="cm">// insufficient funds</span>
    }

    <span class="kw">public double</span> <span class="fn">getBalance</span>() { <span class="kw">return</span> balance; }
}</code></pre>

<div class="callout tip"><div class="callout-title">Access Modifiers</div>
<p><code>private</code> ‚Äî Only this class can access<br>
<code>public</code> ‚Äî Anyone can access<br>
<code>protected</code> ‚Äî This class + child classes<br>
<em>default</em> (no keyword) ‚Äî Same package only</p></div>

<h3>Pillar 2: Inheritance</h3>
<p><strong>Meaning:</strong> A child class gets everything from a parent class, plus can add its own stuff. Like how a <em>SportsCar</em> IS A <em>Car</em>, but with extra features.</p>

<pre><code><span class="cm">// Parent class</span>
<span class="kw">class</span> <span class="tp">Vehicle</span> {
    String brand;
    <span class="kw">int</span> speed;

    <span class="kw">void</span> <span class="fn">start</span>() {
        System.out.println(brand + <span class="st">" started"</span>);
    }
}

<span class="cm">// Child class INHERITS from Vehicle</span>
<span class="kw">class</span> <span class="tp">Car</span> <span class="kw">extends</span> <span class="tp">Vehicle</span> {
    <span class="kw">int</span> numDoors;

    <span class="kw">void</span> <span class="fn">honk</span>() {
        System.out.println(<span class="st">"Beep beep!"</span>);
    }
}

<span class="cm">// Car has: brand, speed, start(), numDoors, honk()</span>
Car car = <span class="kw">new</span> Car();
car.brand = <span class="st">"Honda"</span>;  <span class="cm">// inherited from Vehicle</span>
car.<span class="fn">start</span>();           <span class="cm">// inherited from Vehicle</span>
car.<span class="fn">honk</span>();            <span class="cm">// its own method</span></code></pre>

<h3>Pillar 3: Polymorphism</h3>
<p><strong>Meaning:</strong> "Many forms" ‚Äî same method name, different behavior. This is the SECRET WEAPON of LLD design.</p>

<pre><code><span class="kw">class</span> <span class="tp">Animal</span> {
    <span class="kw">void</span> <span class="fn">makeSound</span>() {
        System.out.println(<span class="st">"Some sound"</span>);
    }
}

<span class="kw">class</span> <span class="tp">Dog</span> <span class="kw">extends</span> <span class="tp">Animal</span> {
    <span class="an">@Override</span>
    <span class="kw">void</span> <span class="fn">makeSound</span>() {        <span class="cm">// OVERRIDES parent method</span>
        System.out.println(<span class="st">"Woof!"</span>);
    }
}

<span class="kw">class</span> <span class="tp">Cat</span> <span class="kw">extends</span> <span class="tp">Animal</span> {
    <span class="an">@Override</span>
    <span class="kw">void</span> <span class="fn">makeSound</span>() {
        System.out.println(<span class="st">"Meow!"</span>);
    }
}

<span class="cm">// THE MAGIC: Use parent type, get child behavior</span>
Animal myPet = <span class="kw">new</span> Dog();
myPet.<span class="fn">makeSound</span>();  <span class="cm">// prints "Woof!" (not "Some sound")</span>

Animal[] pets = { <span class="kw">new</span> Dog(), <span class="kw">new</span> Cat(), <span class="kw">new</span> Dog() };
<span class="kw">for</span> (Animal pet : pets) {
    pet.<span class="fn">makeSound</span>();  <span class="cm">// Each calls its OWN version!</span>
}</code></pre>

<div class="callout interview"><div class="callout-title">üéØ LLD Interview Gold</div><p>Polymorphism lets you write code that works with <em>any</em> type without knowing the specific type. Example: a PaymentProcessor that handles CreditCard, UPI, Cash ‚Äî all through one <code>processPayment()</code> method.</p></div>

<h3>Pillar 4: Abstraction</h3>
<p><strong>Meaning:</strong> Show only WHAT something does, hide HOW it does it. Like driving a car ‚Äî you know the steering wheel turns the car, but you don't need to know the mechanics.</p>

<pre><code><span class="cm">// Abstract class = incomplete blueprint</span>
<span class="kw">abstract class</span> <span class="tp">Shape</span> {
    String color;

    <span class="cm">// Abstract method = MUST be implemented by children</span>
    <span class="kw">abstract double</span> <span class="fn">area</span>();

    <span class="cm">// Normal method = optional to override</span>
    <span class="kw">void</span> <span class="fn">display</span>() {
        System.out.println(color + <span class="st">" shape, area = "</span> + <span class="fn">area</span>());
    }
}

<span class="kw">class</span> <span class="tp">Circle</span> <span class="kw">extends</span> <span class="tp">Shape</span> {
    <span class="kw">double</span> radius;

    <span class="tp">Circle</span>(<span class="kw">double</span> radius) { <span class="kw">this</span>.radius = radius; }

    <span class="an">@Override</span>
    <span class="kw">double</span> <span class="fn">area</span>() { <span class="kw">return</span> Math.PI * radius * radius; }
}

<span class="kw">class</span> <span class="tp">Rectangle</span> <span class="kw">extends</span> <span class="tp">Shape</span> {
    <span class="kw">double</span> w, h;

    <span class="tp">Rectangle</span>(<span class="kw">double</span> w, <span class="kw">double</span> h) { <span class="kw">this</span>.w = w; <span class="kw">this</span>.h = h; }

    <span class="an">@Override</span>
    <span class="kw">double</span> <span class="fn">area</span>() { <span class="kw">return</span> w * h; }
}</code></pre>
`
    },
    {
      title: "Interfaces ‚Äî The Contract",
      content: `
<h3>What is an Interface?</h3>
<p>An <strong>interface</strong> is a <em>contract</em>. It says "if you sign this contract, you PROMISE to implement these methods." It defines WHAT to do, but not HOW.</p>

<pre><code><span class="cm">// Interface = pure contract</span>
<span class="kw">interface</span> <span class="tp">Flyable</span> {
    <span class="kw">void</span> <span class="fn">fly</span>();          <span class="cm">// no body ‚Äî just the promise</span>
    <span class="kw">void</span> <span class="fn">land</span>();
}

<span class="kw">interface</span> <span class="tp">Swimmable</span> {
    <span class="kw">void</span> <span class="fn">swim</span>();
}

<span class="cm">// A class can implement MULTIPLE interfaces</span>
<span class="kw">class</span> <span class="tp">Duck</span> <span class="kw">implements</span> <span class="tp">Flyable</span>, <span class="tp">Swimmable</span> {
    <span class="an">@Override</span>
    <span class="kw">public void</span> <span class="fn">fly</span>()  { System.out.println(<span class="st">"Duck flying"</span>); }

    <span class="an">@Override</span>
    <span class="kw">public void</span> <span class="fn">land</span>() { System.out.println(<span class="st">"Duck landing"</span>); }

    <span class="an">@Override</span>
    <span class="kw">public void</span> <span class="fn">swim</span>() { System.out.println(<span class="st">"Duck swimming"</span>); }
}</code></pre>

<h4>Abstract Class vs Interface ‚Äî When to Use What?</h4>
<table>
<tr><th>Feature</th><th>Abstract Class</th><th>Interface</th></tr>
<tr><td>Can have fields?</td><td>‚úÖ Yes</td><td>‚ùå Only constants</td></tr>
<tr><td>Can have constructors?</td><td>‚úÖ Yes</td><td>‚ùå No</td></tr>
<tr><td>Can have method bodies?</td><td>‚úÖ Yes</td><td>‚úÖ default methods</td></tr>
<tr><td>Multiple inheritance?</td><td>‚ùå Only one parent</td><td>‚úÖ Many interfaces</td></tr>
<tr><td>Use when‚Ä¶</td><td>IS-A relationship with shared code</td><td>CAN-DO capability / contract</td></tr>
</table>

<div class="callout interview"><div class="callout-title">üéØ LLD Golden Rule</div><p>In LLD interviews, <strong>always prefer interfaces</strong> to define behaviors. Use abstract classes when you need shared code among related classes. Example: <code>PaymentMethod</code> interface with <code>CreditCard</code>, <code>UPI</code>, <code>Wallet</code> implementations.</p></div>
`
    },
    {
      title: "Enums ‚Äî Fixed Set of Values",
      content: `
<h3>What are Enums?</h3>
<p>An <strong>enum</strong> (enumeration) represents a <em>fixed set of constants</em>. Instead of using strings like "SMALL", "MEDIUM", "LARGE" (which can be typo'd), use enums!</p>

<pre><code><span class="kw">enum</span> <span class="tp">VehicleType</span> {
    CAR, BIKE, TRUCK, BUS
}

<span class="kw">enum</span> <span class="tp">ParkingSpotSize</span> {
    SMALL, MEDIUM, LARGE
}

<span class="kw">enum</span> <span class="tp">TicketStatus</span> {
    ACTIVE, PAID, LOST
}

<span class="cm">// Using enums</span>
VehicleType type = VehicleType.CAR;

<span class="kw">if</span> (type == VehicleType.CAR) {
    System.out.println(<span class="st">"It's a car!"</span>);
}

<span class="cm">// Switch with enums ‚Äî very common in LLD</span>
<span class="kw">switch</span> (type) {
    <span class="kw">case</span> CAR:   System.out.println(<span class="st">"Assign small spot"</span>); <span class="kw">break</span>;
    <span class="kw">case</span> TRUCK: System.out.println(<span class="st">"Assign large spot"</span>); <span class="kw">break</span>;
    <span class="kw">case</span> BIKE:  System.out.println(<span class="st">"Assign small spot"</span>); <span class="kw">break</span>;
}</code></pre>

<div class="callout important"><div class="callout-title">Why Enums in LLD?</div><p>Every LLD problem uses enums for: status codes (<code>OrderStatus</code>), types (<code>VehicleType</code>), roles (<code>UserRole</code>), states (<code>ElevatorState</code>). They prevent bugs from typos and make code self-documenting.</p></div>
`
    },
    {
      title: "Collections ‚Äî List, Map, Set",
      content: `
<h3>Why Collections?</h3>
<p>Arrays have a fixed size. In LLD, you need lists that grow/shrink (parking spots, orders, users). Java <strong>Collections</strong> are dynamic data structures.</p>

<h4>1. List ‚Äî Ordered collection (allows duplicates)</h4>
<pre><code><span class="kw">import</span> java.util.*;

List&lt;String&gt; names = <span class="kw">new</span> ArrayList&lt;&gt;();
names.add(<span class="st">"Alice"</span>);
names.add(<span class="st">"Bob"</span>);
names.add(<span class="st">"Alice"</span>);       <span class="cm">// duplicates OK</span>
System.out.println(names);  <span class="cm">// [Alice, Bob, Alice]</span>
System.out.println(names.get(<span class="nu">0</span>)); <span class="cm">// Alice</span>
names.remove(<span class="st">"Bob"</span>);
System.out.println(names.size());  <span class="cm">// 2</span></code></pre>

<h4>2. Map ‚Äî Key-Value pairs (like a dictionary)</h4>
<pre><code>Map&lt;String, Integer&gt; ages = <span class="kw">new</span> HashMap&lt;&gt;();
ages.put(<span class="st">"Alice"</span>, <span class="nu">25</span>);
ages.put(<span class="st">"Bob"</span>, <span class="nu">30</span>);

System.out.println(ages.get(<span class="st">"Alice"</span>));     <span class="cm">// 25</span>
System.out.println(ages.containsKey(<span class="st">"Bob"</span>)); <span class="cm">// true</span>

<span class="cm">// Loop through map</span>
<span class="kw">for</span> (Map.Entry&lt;String, Integer&gt; entry : ages.entrySet()) {
    System.out.println(entry.getKey() + <span class="st">" is "</span> + entry.getValue());
}</code></pre>

<h4>3. Set ‚Äî No duplicates, unordered</h4>
<pre><code>Set&lt;String&gt; uniqueNames = <span class="kw">new</span> HashSet&lt;&gt;();
uniqueNames.add(<span class="st">"Alice"</span>);
uniqueNames.add(<span class="st">"Bob"</span>);
uniqueNames.add(<span class="st">"Alice"</span>);  <span class="cm">// ignored ‚Äî already exists</span>
System.out.println(uniqueNames);  <span class="cm">// [Alice, Bob]</span></code></pre>

<h4>4. Queue ‚Äî First-In-First-Out</h4>
<pre><code>Queue&lt;String&gt; queue = <span class="kw">new</span> LinkedList&lt;&gt;();
queue.add(<span class="st">"Customer1"</span>);
queue.add(<span class="st">"Customer2"</span>);
queue.add(<span class="st">"Customer3"</span>);

System.out.println(queue.poll());  <span class="cm">// Customer1 (removed)</span>
System.out.println(queue.peek());  <span class="cm">// Customer2 (NOT removed)</span></code></pre>

<div class="callout tip"><div class="callout-title">LLD Usage Cheat Sheet</div>
<p><strong>List</strong> ‚Üí Ordered items: parking spots, orders, movie seats<br>
<strong>Map</strong> ‚Üí Lookup by key: userId‚ÜíUser, spotId‚ÜíParkingSpot<br>
<strong>Set</strong> ‚Üí Unique items: available spots, registered users<br>
<strong>Queue</strong> ‚Üí FIFO processing: elevator requests, order queue</p></div>
`
    },
    {
      title: "Exception Handling & Generics",
      content: `
<h3>Exception Handling</h3>
<p>When something goes wrong (withdraw more than balance, invalid input), Java uses <strong>exceptions</strong> to handle errors gracefully instead of crashing.</p>

<pre><code><span class="cm">// Creating a custom exception</span>
<span class="kw">class</span> <span class="tp">InsufficientFundsException</span> <span class="kw">extends</span> <span class="tp">Exception</span> {
    <span class="kw">public</span> <span class="tp">InsufficientFundsException</span>(String msg) {
        <span class="kw">super</span>(msg);
    }
}

<span class="cm">// Using it</span>
<span class="kw">class</span> <span class="tp">BankAccount</span> {
    <span class="kw">private double</span> balance;

    <span class="kw">public void</span> <span class="fn">withdraw</span>(<span class="kw">double</span> amount) <span class="kw">throws</span> InsufficientFundsException {
        <span class="kw">if</span> (amount > balance) {
            <span class="kw">throw new</span> InsufficientFundsException(
                <span class="st">"Need "</span> + amount + <span class="st">" but have "</span> + balance
            );
        }
        balance -= amount;
    }
}

<span class="cm">// Handling exceptions</span>
<span class="kw">try</span> {
    account.<span class="fn">withdraw</span>(<span class="nu">1000</span>);
} <span class="kw">catch</span> (InsufficientFundsException e) {
    System.out.println(<span class="st">"Error: "</span> + e.getMessage());
}</code></pre>

<h3>Generics ‚Äî Type Safety</h3>
<p><strong>Generics</strong> let you write classes/methods that work with any type, while keeping type safety.</p>

<pre><code><span class="cm">// Without generics: no type safety</span>
List list = <span class="kw">new</span> ArrayList();
list.add(<span class="st">"Hello"</span>);
list.add(<span class="nu">42</span>);  <span class="cm">// mixed types ‚Äî bugs waiting to happen!</span>

<span class="cm">// With generics: type-safe</span>
List&lt;String&gt; names = <span class="kw">new</span> ArrayList&lt;&gt;();
names.add(<span class="st">"Hello"</span>);
<span class="cm">// names.add(42);  // COMPILE ERROR! Can only add Strings</span></code></pre>

<div class="callout interview"><div class="callout-title">üéØ In LLD Interviews</div><p>Custom exceptions show you handle edge cases properly. Generics show you write reusable code. Both are signals of a senior engineer's design sensibility.</p></div>

<div class="section-divider"></div>
<h3>‚úÖ Module 1 Complete!</h3>
<p>You now know enough Java to design any system! The key concepts: <strong>classes, objects, constructors, 4 OOP pillars (encapsulation, inheritance, polymorphism, abstraction), interfaces, enums, collections, and exceptions</strong>. Move on to Module 2 to learn the DESIGN PRINCIPLES.</p>
`
    }
  ]
},
// ============================================================
// MODULE 2: OOP DESIGN PRINCIPLES & SOLID
// ============================================================
{
  title: "OOP & SOLID Principles",
  topics: [
    {
      title: "S ‚Äî Single Responsibility",
      content: `
<h3>Single Responsibility Principle (SRP)</h3>
<p><strong>Rule:</strong> A class should have <em>only ONE reason to change</em>. Each class does ONE thing, and does it well.</p>

<h4>‚ùå BAD: One class doing everything</h4>
<pre><code><span class="kw">class</span> <span class="tp">Invoice</span> {
    <span class="kw">void</span> <span class="fn">calculateTotal</span>()    { <span class="cm">/* math logic */</span> }
    <span class="kw">void</span> <span class="fn">printInvoice</span>()      { <span class="cm">/* printing logic */</span> }
    <span class="kw">void</span> <span class="fn">saveToDatabase</span>()    { <span class="cm">/* database logic */</span> }
    <span class="kw">void</span> <span class="fn">sendEmail</span>()         { <span class="cm">/* email logic */</span> }
}
<span class="cm">// Problem: If printing changes, you modify Invoice class</span>
<span class="cm">// If email template changes, you modify Invoice class</span>
<span class="cm">// Too many reasons to change!</span></code></pre>

<h4>‚úÖ GOOD: Each class = one responsibility</h4>
<pre><code><span class="kw">class</span> <span class="tp">Invoice</span> {
    <span class="kw">void</span> <span class="fn">calculateTotal</span>() { <span class="cm">/* only math */</span> }
}

<span class="kw">class</span> <span class="tp">InvoicePrinter</span> {
    <span class="kw">void</span> <span class="fn">print</span>(Invoice invoice) { <span class="cm">/* only printing */</span> }
}

<span class="kw">class</span> <span class="tp">InvoiceRepository</span> {
    <span class="kw">void</span> <span class="fn">save</span>(Invoice invoice) { <span class="cm">/* only database */</span> }
}

<span class="kw">class</span> <span class="tp">InvoiceMailer</span> {
    <span class="kw">void</span> <span class="fn">send</span>(Invoice invoice) { <span class="cm">/* only email */</span> }
}</code></pre>

<div class="callout interview"><div class="callout-title">üéØ Interview Signal</div><p>When designing a Parking Lot: <code>ParkingLot</code> manages spots, <code>TicketService</code> handles tickets, <code>PaymentService</code> handles payments. Don't dump everything into one God class!</p></div>
`
    },
    {
      title: "O ‚Äî Open/Closed Principle",
      content: `
<h3>Open/Closed Principle (OCP)</h3>
<p><strong>Rule:</strong> Classes should be <em>open for extension</em> but <em>closed for modification</em>. Add new features by ADDING code, not changing existing code.</p>

<h4>‚ùå BAD: Modifying existing code for every new type</h4>
<pre><code><span class="kw">class</span> <span class="tp">PaymentProcessor</span> {
    <span class="kw">void</span> <span class="fn">pay</span>(String type, <span class="kw">double</span> amount) {
        <span class="kw">if</span> (type.equals(<span class="st">"creditcard"</span>)) {
            <span class="cm">// credit card logic</span>
        } <span class="kw">else if</span> (type.equals(<span class="st">"upi"</span>)) {
            <span class="cm">// UPI logic</span>
        } <span class="kw">else if</span> (type.equals(<span class="st">"crypto"</span>)) {
            <span class="cm">// Every new payment = modify this class!</span>
        }
    }
}</code></pre>

<h4>‚úÖ GOOD: Extend without modifying</h4>
<pre><code><span class="kw">interface</span> <span class="tp">PaymentMethod</span> {
    <span class="kw">void</span> <span class="fn">pay</span>(<span class="kw">double</span> amount);
}

<span class="kw">class</span> <span class="tp">CreditCardPayment</span> <span class="kw">implements</span> <span class="tp">PaymentMethod</span> {
    <span class="kw">public void</span> <span class="fn">pay</span>(<span class="kw">double</span> amount) { <span class="cm">/* credit card logic */</span> }
}

<span class="kw">class</span> <span class="tp">UPIPayment</span> <span class="kw">implements</span> <span class="tp">PaymentMethod</span> {
    <span class="kw">public void</span> <span class="fn">pay</span>(<span class="kw">double</span> amount) { <span class="cm">/* UPI logic */</span> }
}

<span class="cm">// Adding crypto? Just add a NEW class. ZERO changes to existing code!</span>
<span class="kw">class</span> <span class="tp">CryptoPayment</span> <span class="kw">implements</span> <span class="tp">PaymentMethod</span> {
    <span class="kw">public void</span> <span class="fn">pay</span>(<span class="kw">double</span> amount) { <span class="cm">/* crypto logic */</span> }
}

<span class="cm">// Processor doesn't care about type ‚Äî just calls pay()</span>
<span class="kw">class</span> <span class="tp">PaymentProcessor</span> {
    <span class="kw">void</span> <span class="fn">process</span>(PaymentMethod method, <span class="kw">double</span> amount) {
        method.<span class="fn">pay</span>(amount);
    }
}</code></pre>
`
    },
    {
      title: "L ‚Äî Liskov Substitution",
      content: `
<h3>Liskov Substitution Principle (LSP)</h3>
<p><strong>Rule:</strong> If <code>B extends A</code>, you should be able to use <code>B</code> everywhere you use <code>A</code> without breaking anything.</p>

<h4>‚ùå BAD: Subclass breaks parent's behavior</h4>
<pre><code><span class="kw">class</span> <span class="tp">Bird</span> {
    <span class="kw">void</span> <span class="fn">fly</span>() { System.out.println(<span class="st">"Flying..."</span>); }
}

<span class="kw">class</span> <span class="tp">Penguin</span> <span class="kw">extends</span> <span class="tp">Bird</span> {
    <span class="an">@Override</span>
    <span class="kw">void</span> <span class="fn">fly</span>() {
        <span class="kw">throw new</span> UnsupportedOperationException(<span class="st">"Penguins can't fly!"</span>);
    }
}
<span class="cm">// PROBLEM: Code that expects a Bird will crash with Penguin!</span>
<span class="cm">// Bird b = new Penguin(); b.fly(); ‚Üí EXCEPTION!</span></code></pre>

<h4>‚úÖ GOOD: Separate the capabilities</h4>
<pre><code><span class="kw">interface</span> <span class="tp">Flyable</span> {
    <span class="kw">void</span> <span class="fn">fly</span>();
}

<span class="kw">interface</span> <span class="tp">Walkable</span> {
    <span class="kw">void</span> <span class="fn">walk</span>();
}

<span class="kw">class</span> <span class="tp">Sparrow</span> <span class="kw">implements</span> <span class="tp">Flyable</span>, <span class="tp">Walkable</span> {
    <span class="kw">public void</span> <span class="fn">fly</span>()  { System.out.println(<span class="st">"Sparrow flying"</span>); }
    <span class="kw">public void</span> <span class="fn">walk</span>() { System.out.println(<span class="st">"Sparrow walking"</span>); }
}

<span class="kw">class</span> <span class="tp">Penguin</span> <span class="kw">implements</span> <span class="tp">Walkable</span> {
    <span class="kw">public void</span> <span class="fn">walk</span>() { System.out.println(<span class="st">"Penguin walking"</span>); }
    <span class="cm">// No fly() ‚Äî because penguins don't fly!</span>
}</code></pre>

<div class="callout tip"><div class="callout-title">Simple Test</div><p>Ask yourself: "Can I replace the parent with this child and nothing breaks?" If yes ‚Üí good. If no ‚Üí violation.</p></div>
`
    },
    {
      title: "I ‚Äî Interface Segregation",
      content: `
<h3>Interface Segregation Principle (ISP)</h3>
<p><strong>Rule:</strong> Don't force classes to implement methods they don't need. Split fat interfaces into smaller, focused ones.</p>

<h4>‚ùå BAD: One fat interface</h4>
<pre><code><span class="kw">interface</span> <span class="tp">Worker</span> {
    <span class="kw">void</span> <span class="fn">code</span>();
    <span class="kw">void</span> <span class="fn">test</span>();
    <span class="kw">void</span> <span class="fn">design</span>();
    <span class="kw">void</span> <span class="fn">managePeople</span>();
}

<span class="cm">// Junior dev is FORCED to implement managePeople() ‚Äî makes no sense!</span>
<span class="kw">class</span> <span class="tp">JuniorDev</span> <span class="kw">implements</span> <span class="tp">Worker</span> {
    <span class="kw">public void</span> <span class="fn">code</span>()         { <span class="cm">/* yes */</span> }
    <span class="kw">public void</span> <span class="fn">test</span>()         { <span class="cm">/* yes */</span> }
    <span class="kw">public void</span> <span class="fn">design</span>()       { <span class="cm">/* maybe */</span> }
    <span class="kw">public void</span> <span class="fn">managePeople</span>() { <span class="cm">/* NOT MY JOB! */</span> }
}</code></pre>

<h4>‚úÖ GOOD: Split into focused interfaces</h4>
<pre><code><span class="kw">interface</span> <span class="tp">Coder</span>    { <span class="kw">void</span> <span class="fn">code</span>(); }
<span class="kw">interface</span> <span class="tp">Tester</span>   { <span class="kw">void</span> <span class="fn">test</span>(); }
<span class="kw">interface</span> <span class="tp">Designer</span> { <span class="kw">void</span> <span class="fn">design</span>(); }
<span class="kw">interface</span> <span class="tp">Manager</span>  { <span class="kw">void</span> <span class="fn">managePeople</span>(); }

<span class="kw">class</span> <span class="tp">JuniorDev</span> <span class="kw">implements</span> <span class="tp">Coder</span>, <span class="tp">Tester</span> {
    <span class="kw">public void</span> <span class="fn">code</span>() { <span class="cm">/* yes */</span> }
    <span class="kw">public void</span> <span class="fn">test</span>() { <span class="cm">/* yes */</span> }
}

<span class="kw">class</span> <span class="tp">TechLead</span> <span class="kw">implements</span> <span class="tp">Coder</span>, <span class="tp">Designer</span>, <span class="tp">Manager</span> {
    <span class="kw">public void</span> <span class="fn">code</span>()         { <span class="cm">/* yes */</span> }
    <span class="kw">public void</span> <span class="fn">design</span>()       { <span class="cm">/* yes */</span> }
    <span class="kw">public void</span> <span class="fn">managePeople</span>() { <span class="cm">/* yes */</span> }
}</code></pre>
`
    },
    {
      title: "D ‚Äî Dependency Inversion",
      content: `
<h3>Dependency Inversion Principle (DIP)</h3>
<p><strong>Rule:</strong> High-level modules should NOT depend on low-level modules. Both should depend on <em>abstractions</em> (interfaces).</p>

<h4>‚ùå BAD: Directly depending on concrete class</h4>
<pre><code><span class="kw">class</span> <span class="tp">MySQLDatabase</span> {
    <span class="kw">void</span> <span class="fn">save</span>(String data) { <span class="cm">/* MySQL specific */</span> }
}

<span class="kw">class</span> <span class="tp">UserService</span> {
    <span class="kw">private</span> MySQLDatabase db = <span class="kw">new</span> MySQLDatabase();
    <span class="cm">// PROBLEM: Can't switch to PostgreSQL without changing UserService!</span>

    <span class="kw">void</span> <span class="fn">saveUser</span>(String user) {
        db.<span class="fn">save</span>(user);
    }
}</code></pre>

<h4>‚úÖ GOOD: Depend on abstraction</h4>
<pre><code><span class="cm">// Abstraction (interface)</span>
<span class="kw">interface</span> <span class="tp">Database</span> {
    <span class="kw">void</span> <span class="fn">save</span>(String data);
}

<span class="cm">// Low-level modules implement the interface</span>
<span class="kw">class</span> <span class="tp">MySQLDatabase</span> <span class="kw">implements</span> <span class="tp">Database</span> {
    <span class="kw">public void</span> <span class="fn">save</span>(String data) { <span class="cm">/* MySQL */</span> }
}

<span class="kw">class</span> <span class="tp">PostgresDatabase</span> <span class="kw">implements</span> <span class="tp">Database</span> {
    <span class="kw">public void</span> <span class="fn">save</span>(String data) { <span class="cm">/* Postgres */</span> }
}

<span class="cm">// High-level module depends on INTERFACE, not concrete class</span>
<span class="kw">class</span> <span class="tp">UserService</span> {
    <span class="kw">private</span> Database db;  <span class="cm">// interface type!</span>

    <span class="tp">UserService</span>(Database db) {
        <span class="kw">this</span>.db = db;  <span class="cm">// injected from outside</span>
    }

    <span class="kw">void</span> <span class="fn">saveUser</span>(String user) {
        db.<span class="fn">save</span>(user);  <span class="cm">// works with ANY database!</span>
    }
}

<span class="cm">// Usage ‚Äî easy to switch!</span>
UserService service1 = <span class="kw">new</span> UserService(<span class="kw">new</span> MySQLDatabase());
UserService service2 = <span class="kw">new</span> UserService(<span class="kw">new</span> PostgresDatabase());</code></pre>

<div class="callout interview"><div class="callout-title">üéØ This is Dependency Injection</div><p>Passing dependencies through the constructor (instead of creating them inside) is called <strong>Dependency Injection</strong>. It's THE most important pattern in professional software and LLD interviews.</p></div>

<div class="section-divider"></div>
<h3>‚úÖ Module 2 Complete!</h3>
<p>You now understand SOLID ‚Äî the foundation of clean design. Every LLD solution you write should follow these principles. Next: Design Patterns!</p>
`
    },
    {
      title: "Composition vs Inheritance",
      content: `
<h3>The Golden Rule: Favor Composition over Inheritance</h3>
<p><strong>Inheritance</strong> = "IS-A" relationship (Dog IS AN Animal).<br>
<strong>Composition</strong> = "HAS-A" relationship (Car HAS AN Engine).</p>

<h4>‚ùå Inheritance can become rigid</h4>
<pre><code><span class="kw">class</span> <span class="tp">Robot</span> <span class="kw">extends</span> <span class="tp">Worker</span> {
    <span class="cm">// Inherits eat(), sleep() ‚Äî robots don't eat or sleep!</span>
}</code></pre>

<h4>‚úÖ Composition is flexible</h4>
<pre><code><span class="kw">interface</span> <span class="tp">Engine</span> {
    <span class="kw">void</span> <span class="fn">start</span>();
}

<span class="kw">class</span> <span class="tp">ElectricEngine</span> <span class="kw">implements</span> <span class="tp">Engine</span> {
    <span class="kw">public void</span> <span class="fn">start</span>() { System.out.println(<span class="st">"Electric hum..."</span>); }
}

<span class="kw">class</span> <span class="tp">PetrolEngine</span> <span class="kw">implements</span> <span class="tp">Engine</span> {
    <span class="kw">public void</span> <span class="fn">start</span>() { System.out.println(<span class="st">"Vroom!"</span>); }
}

<span class="kw">class</span> <span class="tp">Car</span> {
    <span class="kw">private</span> Engine engine;  <span class="cm">// HAS-A engine (composition)</span>

    <span class="tp">Car</span>(Engine engine) {
        <span class="kw">this</span>.engine = engine;
    }

    <span class="kw">void</span> <span class="fn">start</span>() {
        engine.<span class="fn">start</span>();  <span class="cm">// delegates to engine</span>
    }
}

<span class="cm">// Can swap engines easily!</span>
Car tesla = <span class="kw">new</span> Car(<span class="kw">new</span> ElectricEngine());
Car bmw = <span class="kw">new</span> Car(<span class="kw">new</span> PetrolEngine());</code></pre>

<div class="callout interview"><div class="callout-title">üéØ LLD Interview Rule</div><p>In 90% of cases, <strong>composition is better</strong> than inheritance. It's more flexible, testable, and follows SOLID. Use inheritance ONLY for true IS-A relationships.</p></div>
`
    }
  ]
},
// ============================================================
    // MODULE 3: DESIGN PATTERNS
    // ============================================================
    {
        title: "Design Patterns",
        topics: [
            {
                title: "What are Design Patterns?",
                content: `
<h3>Design Patterns ‚Äî Proven Solutions</h3>
<p>A <strong>design pattern</strong> is a <em>reusable solution to a common problem</em>. Think of them as recipes. You don't invent a new way to bake bread every time ‚Äî you use a recipe. Same with code.</p>

<div class="callout important"><div class="callout-title">3 Categories</div>
<p><strong>Creational</strong> ‚Äî How to CREATE objects (Singleton, Factory, Builder)<br>
<strong>Structural</strong> ‚Äî How to STRUCTURE/organize classes (Adapter, Decorator, Facade)<br>
<strong>Behavioral</strong> ‚Äî How objects COMMUNICATE (Strategy, Observer, State, Command)</p></div>

<p>You do NOT need to memorize all 23 GoF patterns. For FAANG LLD interviews, you need <strong>~12 patterns</strong>. We'll cover each one with real LLD examples.</p>
`
            },
            {
                title: "Singleton Pattern",
                content: `
<h3>Singleton ‚Äî Only ONE Instance</h3>
<p><strong>Problem:</strong> Some classes should have exactly ONE object in the entire system. Examples: Database connection, Logger, Configuration manager.</p>

<pre><code><span class="kw">class</span> <span class="tp">ParkingLotManager</span> {
    <span class="cm">// 1. Private static instance</span>
    <span class="kw">private static</span> ParkingLotManager instance;

    <span class="cm">// 2. Private constructor ‚Äî nobody can do 'new ParkingLotManager()'</span>
    <span class="kw">private</span> <span class="tp">ParkingLotManager</span>() { }

    <span class="cm">// 3. Public static method to get the ONE instance</span>
    <span class="kw">public static</span> ParkingLotManager <span class="fn">getInstance</span>() {
        <span class="kw">if</span> (instance == <span class="kw">null</span>) {
            instance = <span class="kw">new</span> ParkingLotManager();
        }
        <span class="kw">return</span> instance;
    }

    <span class="kw">public void</span> <span class="fn">manage</span>() {
        System.out.println(<span class="st">"Managing the parking lot..."</span>);
    }
}

<span class="cm">// Usage</span>
ParkingLotManager mgr1 = ParkingLotManager.<span class="fn">getInstance</span>();
ParkingLotManager mgr2 = ParkingLotManager.<span class="fn">getInstance</span>();
<span class="cm">// mgr1 == mgr2 ‚Üí true! Same object</span></code></pre>

<div class="callout tip"><div class="callout-title">Thread-Safe Singleton</div>
<pre><code><span class="kw">class</span> <span class="tp">Singleton</span> {
    <span class="kw">private static volatile</span> Singleton instance;
    <span class="kw">private</span> <span class="tp">Singleton</span>() {}

    <span class="kw">public static</span> Singleton <span class="fn">getInstance</span>() {
        <span class="kw">if</span> (instance == <span class="kw">null</span>) {
            <span class="kw">synchronized</span> (Singleton.<span class="kw">class</span>) {
                <span class="kw">if</span> (instance == <span class="kw">null</span>) {
                    instance = <span class="kw">new</span> Singleton();
                }
            }
        }
        <span class="kw">return</span> instance;
    }
}</code></pre></div>

<div class="callout interview"><div class="callout-title">üéØ When interviewers see Singleton</div><p>Use Singleton for: ParkingLot, ElevatorController, ATMService, VendingMachine. It signals you understand there should be only one controller instance.</p></div>
`
            },
            {
                title: "Factory Pattern",
                content: `
<h3>Factory ‚Äî Let a Factory Create Objects For You</h3>
<p><strong>Problem:</strong> You need to create different types of objects based on some input, without exposing creation logic.</p>

<pre><code><span class="cm">// Step 1: Common interface</span>
<span class="kw">interface</span> <span class="tp">Notification</span> {
    <span class="kw">void</span> <span class="fn">send</span>(String message);
}

<span class="cm">// Step 2: Concrete implementations</span>
<span class="kw">class</span> <span class="tp">EmailNotification</span> <span class="kw">implements</span> <span class="tp">Notification</span> {
    <span class="kw">public void</span> <span class="fn">send</span>(String msg) { System.out.println(<span class="st">"Email: "</span> + msg); }
}
<span class="kw">class</span> <span class="tp">SMSNotification</span> <span class="kw">implements</span> <span class="tp">Notification</span> {
    <span class="kw">public void</span> <span class="fn">send</span>(String msg) { System.out.println(<span class="st">"SMS: "</span> + msg); }
}
<span class="kw">class</span> <span class="tp">PushNotification</span> <span class="kw">implements</span> <span class="tp">Notification</span> {
    <span class="kw">public void</span> <span class="fn">send</span>(String msg) { System.out.println(<span class="st">"Push: "</span> + msg); }
}

<span class="cm">// Step 3: The Factory</span>
<span class="kw">class</span> <span class="tp">NotificationFactory</span> {
    <span class="kw">public static</span> Notification <span class="fn">create</span>(String type) {
        <span class="kw">switch</span> (type) {
            <span class="kw">case</span> <span class="st">"email"</span>: <span class="kw">return new</span> EmailNotification();
            <span class="kw">case</span> <span class="st">"sms"</span>:   <span class="kw">return new</span> SMSNotification();
            <span class="kw">case</span> <span class="st">"push"</span>:  <span class="kw">return new</span> PushNotification();
            <span class="kw">default</span>:     <span class="kw">throw new</span> IllegalArgumentException(<span class="st">"Unknown type"</span>);
        }
    }
}

<span class="cm">// Usage ‚Äî client doesn't know about concrete classes</span>
Notification n = NotificationFactory.<span class="fn">create</span>(<span class="st">"email"</span>);
n.<span class="fn">send</span>(<span class="st">"Your order is confirmed!"</span>);</code></pre>

<div class="callout interview"><div class="callout-title">üéØ LLD Usage</div><p>Use Factory for: creating different Vehicle types in Parking Lot, different Piece types in Chess, different Notification channels in any system.</p></div>
`
            },
            {
                title: "Builder Pattern",
                content: `
<h3>Builder ‚Äî Build Complex Objects Step by Step</h3>
<p><strong>Problem:</strong> Object has many optional fields. Constructor with 10 parameters is unreadable.</p>

<pre><code><span class="cm">// ‚ùå Telescope constructor anti-pattern</span>
<span class="cm">// new User("Alice", 25, "alice@mail.com", "NYC", "F", true, false, "premium")</span>
<span class="cm">// What does 'true' mean? What does 'false' mean? Unreadable!</span>

<span class="cm">// ‚úÖ Builder pattern</span>
<span class="kw">class</span> <span class="tp">User</span> {
    <span class="kw">private</span> String name;
    <span class="kw">private int</span> age;
    <span class="kw">private</span> String email;
    <span class="kw">private</span> String city;
    <span class="kw">private</span> String membershipType;

    <span class="kw">private</span> <span class="tp">User</span>(Builder builder) {
        <span class="kw">this</span>.name = builder.name;
        <span class="kw">this</span>.age = builder.age;
        <span class="kw">this</span>.email = builder.email;
        <span class="kw">this</span>.city = builder.city;
        <span class="kw">this</span>.membershipType = builder.membershipType;
    }

    <span class="kw">static class</span> <span class="tp">Builder</span> {
        <span class="kw">private</span> String name;   <span class="cm">// required</span>
        <span class="kw">private int</span> age;       <span class="cm">// required</span>
        <span class="kw">private</span> String email;
        <span class="kw">private</span> String city;
        <span class="kw">private</span> String membershipType;

        <span class="tp">Builder</span>(String name, <span class="kw">int</span> age) {
            <span class="kw">this</span>.name = name;
            <span class="kw">this</span>.age = age;
        }

        Builder <span class="fn">email</span>(String e) { <span class="kw">this</span>.email = e; <span class="kw">return this</span>; }
        Builder <span class="fn">city</span>(String c)  { <span class="kw">this</span>.city = c; <span class="kw">return this</span>; }
        Builder <span class="fn">membership</span>(String m) { <span class="kw">this</span>.membershipType = m; <span class="kw">return this</span>; }

        User <span class="fn">build</span>() { <span class="kw">return new</span> User(<span class="kw">this</span>); }
    }
}

<span class="cm">// Crystal clear!</span>
User user = <span class="kw">new</span> User.Builder(<span class="st">"Alice"</span>, <span class="nu">25</span>)
    .<span class="fn">email</span>(<span class="st">"alice@mail.com"</span>)
    .<span class="fn">city</span>(<span class="st">"NYC"</span>)
    .<span class="fn">membership</span>(<span class="st">"premium"</span>)
    .<span class="fn">build</span>();</code></pre>
`
            },
            {
                title: "Strategy Pattern",
                content: `
<h3>Strategy ‚Äî Swap Algorithms at Runtime</h3>
<p><strong>Problem:</strong> You need different behaviors (algorithms) that can be swapped dynamically. This is THE most important behavioral pattern for LLD.</p>

<pre><code><span class="cm">// Step 1: Strategy interface</span>
<span class="kw">interface</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">double</span> <span class="fn">calculatePrice</span>(<span class="kw">double</span> basePrice);
}

<span class="cm">// Step 2: Concrete strategies</span>
<span class="kw">class</span> <span class="tp">RegularPricing</span> <span class="kw">implements</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">public double</span> <span class="fn">calculatePrice</span>(<span class="kw">double</span> base) { <span class="kw">return</span> base; }
}

<span class="kw">class</span> <span class="tp">HappyHourPricing</span> <span class="kw">implements</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">public double</span> <span class="fn">calculatePrice</span>(<span class="kw">double</span> base) { <span class="kw">return</span> base * <span class="nu">0.5</span>; }
}

<span class="kw">class</span> <span class="tp">WeekendPricing</span> <span class="kw">implements</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">public double</span> <span class="fn">calculatePrice</span>(<span class="kw">double</span> base) { <span class="kw">return</span> base * <span class="nu">1.5</span>; }
}

<span class="cm">// Step 3: Context class uses strategy</span>
<span class="kw">class</span> <span class="tp">ParkingLot</span> {
    <span class="kw">private</span> PricingStrategy strategy;

    <span class="kw">void</span> <span class="fn">setPricingStrategy</span>(PricingStrategy s) { <span class="kw">this</span>.strategy = s; }

    <span class="kw">double</span> <span class="fn">getPrice</span>(<span class="kw">double</span> hours) {
        <span class="kw">return</span> strategy.<span class="fn">calculatePrice</span>(hours * <span class="nu">10</span>);
    }
}

<span class="cm">// Can swap at runtime!</span>
ParkingLot lot = <span class="kw">new</span> ParkingLot();
lot.<span class="fn">setPricingStrategy</span>(<span class="kw">new</span> RegularPricing());    <span class="cm">// normal day</span>
lot.<span class="fn">setPricingStrategy</span>(<span class="kw">new</span> HappyHourPricing());  <span class="cm">// happy hour</span></code></pre>

<div class="callout interview"><div class="callout-title">üéØ Use Strategy For</div><p>Payment methods, pricing algorithms, sorting strategies, validation rules, notification channels. Any time you have multiple interchangeable behaviors ‚Üí Strategy pattern.</p></div>
`
            },
            {
                title: "Observer Pattern",
                content: `
<h3>Observer ‚Äî Notify When Something Changes</h3>
<p><strong>Problem:</strong> When one object changes state, other objects need to be notified automatically. Like subscribing to YouTube ‚Äî you get notified when a new video is uploaded.</p>

<pre><code><span class="kw">interface</span> <span class="tp">Observer</span> {
    <span class="kw">void</span> <span class="fn">update</span>(String message);
}

<span class="kw">interface</span> <span class="tp">Subject</span> {
    <span class="kw">void</span> <span class="fn">subscribe</span>(Observer o);
    <span class="kw">void</span> <span class="fn">unsubscribe</span>(Observer o);
    <span class="kw">void</span> <span class="fn">notifyAll</span>(String message);
}

<span class="kw">class</span> <span class="tp">OrderService</span> <span class="kw">implements</span> <span class="tp">Subject</span> {
    <span class="kw">private</span> List&lt;Observer&gt; observers = <span class="kw">new</span> ArrayList&lt;&gt;();

    <span class="kw">public void</span> <span class="fn">subscribe</span>(Observer o) { observers.add(o); }
    <span class="kw">public void</span> <span class="fn">unsubscribe</span>(Observer o) { observers.remove(o); }
    <span class="kw">public void</span> <span class="fn">notifyAll</span>(String msg) {
        <span class="kw">for</span> (Observer o : observers) o.<span class="fn">update</span>(msg);
    }

    <span class="kw">public void</span> <span class="fn">placeOrder</span>(String order) {
        System.out.println(<span class="st">"Order placed: "</span> + order);
        <span class="fn">notifyAll</span>(<span class="st">"New order: "</span> + order);
    }
}

<span class="kw">class</span> <span class="tp">EmailService</span> <span class="kw">implements</span> <span class="tp">Observer</span> {
    <span class="kw">public void</span> <span class="fn">update</span>(String msg) { System.out.println(<span class="st">"üìß Email: "</span> + msg); }
}

<span class="kw">class</span> <span class="tp">InventoryService</span> <span class="kw">implements</span> <span class="tp">Observer</span> {
    <span class="kw">public void</span> <span class="fn">update</span>(String msg) { System.out.println(<span class="st">"üì¶ Inventory updated"</span>); }
}

<span class="cm">// Usage</span>
OrderService orders = <span class="kw">new</span> OrderService();
orders.<span class="fn">subscribe</span>(<span class="kw">new</span> EmailService());
orders.<span class="fn">subscribe</span>(<span class="kw">new</span> InventoryService());
orders.<span class="fn">placeOrder</span>(<span class="st">"iPhone 15"</span>);
<span class="cm">// Both get notified automatically!</span></code></pre>
`
            },
            {
                title: "State Pattern",
                content: `
<h3>State ‚Äî Change Behavior Based on State</h3>
<p><strong>Problem:</strong> An object behaves differently depending on its current state. Instead of messy if-else chains, each state becomes its own class.</p>

<pre><code><span class="cm">// State interface</span>
<span class="kw">interface</span> <span class="tp">VendingMachineState</span> {
    <span class="kw">void</span> <span class="fn">insertCoin</span>(VendingMachine vm);
    <span class="kw">void</span> <span class="fn">selectProduct</span>(VendingMachine vm);
    <span class="kw">void</span> <span class="fn">dispense</span>(VendingMachine vm);
}

<span class="kw">class</span> <span class="tp">IdleState</span> <span class="kw">implements</span> <span class="tp">VendingMachineState</span> {
    <span class="kw">public void</span> <span class="fn">insertCoin</span>(VendingMachine vm) {
        System.out.println(<span class="st">"Coin inserted"</span>);
        vm.<span class="fn">setState</span>(<span class="kw">new</span> HasCoinState());
    }
    <span class="kw">public void</span> <span class="fn">selectProduct</span>(VendingMachine vm) {
        System.out.println(<span class="st">"Insert coin first!"</span>);
    }
    <span class="kw">public void</span> <span class="fn">dispense</span>(VendingMachine vm) {
        System.out.println(<span class="st">"Insert coin first!"</span>);
    }
}

<span class="kw">class</span> <span class="tp">HasCoinState</span> <span class="kw">implements</span> <span class="tp">VendingMachineState</span> {
    <span class="kw">public void</span> <span class="fn">insertCoin</span>(VendingMachine vm) {
        System.out.println(<span class="st">"Coin already inserted"</span>);
    }
    <span class="kw">public void</span> <span class="fn">selectProduct</span>(VendingMachine vm) {
        System.out.println(<span class="st">"Product selected"</span>);
        vm.<span class="fn">setState</span>(<span class="kw">new</span> DispensingState());
    }
    <span class="kw">public void</span> <span class="fn">dispense</span>(VendingMachine vm) {
        System.out.println(<span class="st">"Select product first!"</span>);
    }
}

<span class="kw">class</span> <span class="tp">VendingMachine</span> {
    <span class="kw">private</span> VendingMachineState state;

    <span class="tp">VendingMachine</span>() { <span class="kw">this</span>.state = <span class="kw">new</span> IdleState(); }

    <span class="kw">void</span> <span class="fn">setState</span>(VendingMachineState s) { <span class="kw">this</span>.state = s; }
    <span class="kw">void</span> <span class="fn">insertCoin</span>()     { state.<span class="fn">insertCoin</span>(<span class="kw">this</span>); }
    <span class="kw">void</span> <span class="fn">selectProduct</span>()  { state.<span class="fn">selectProduct</span>(<span class="kw">this</span>); }
    <span class="kw">void</span> <span class="fn">dispense</span>()       { state.<span class="fn">dispense</span>(<span class="kw">this</span>); }
}</code></pre>

<div class="callout interview"><div class="callout-title">üéØ Common LLD Use Cases</div><p><strong>Vending Machine</strong> (Idle‚ÜíHasCoin‚ÜíDispensing), <strong>Elevator</strong> (Idle‚ÜíMoving‚ÜíDoorOpen), <strong>Order</strong> (Placed‚ÜíConfirmed‚ÜíShipped‚ÜíDelivered). State pattern is asked in 5+ LLD problems!</p></div>
`
            },
            {
                title: "Decorator & Adapter",
                content: `
<h3>Decorator ‚Äî Add Features Dynamically</h3>
<p><strong>Problem:</strong> Add responsibilities to objects without modifying their class. Like adding toppings to a pizza ‚Äî you wrap the base with extras.</p>

<pre><code><span class="kw">interface</span> <span class="tp">Coffee</span> {
    <span class="kw">double</span> <span class="fn">cost</span>();
    String <span class="fn">description</span>();
}

<span class="kw">class</span> <span class="tp">BasicCoffee</span> <span class="kw">implements</span> <span class="tp">Coffee</span> {
    <span class="kw">public double</span> <span class="fn">cost</span>() { <span class="kw">return</span> <span class="nu">50</span>; }
    <span class="kw">public</span> String <span class="fn">description</span>() { <span class="kw">return</span> <span class="st">"Coffee"</span>; }
}

<span class="cm">// Decorators wrap the original</span>
<span class="kw">class</span> <span class="tp">MilkDecorator</span> <span class="kw">implements</span> <span class="tp">Coffee</span> {
    <span class="kw">private</span> Coffee coffee;
    <span class="tp">MilkDecorator</span>(Coffee c) { <span class="kw">this</span>.coffee = c; }
    <span class="kw">public double</span> <span class="fn">cost</span>() { <span class="kw">return</span> coffee.<span class="fn">cost</span>() + <span class="nu">20</span>; }
    <span class="kw">public</span> String <span class="fn">description</span>() { <span class="kw">return</span> coffee.<span class="fn">description</span>() + <span class="st">" + Milk"</span>; }
}

<span class="kw">class</span> <span class="tp">SugarDecorator</span> <span class="kw">implements</span> <span class="tp">Coffee</span> {
    <span class="kw">private</span> Coffee coffee;
    <span class="tp">SugarDecorator</span>(Coffee c) { <span class="kw">this</span>.coffee = c; }
    <span class="kw">public double</span> <span class="fn">cost</span>() { <span class="kw">return</span> coffee.<span class="fn">cost</span>() + <span class="nu">10</span>; }
    <span class="kw">public</span> String <span class="fn">description</span>() { <span class="kw">return</span> coffee.<span class="fn">description</span>() + <span class="st">" + Sugar"</span>; }
}

<span class="cm">// Stack decorators!</span>
Coffee order = <span class="kw">new</span> SugarDecorator(<span class="kw">new</span> MilkDecorator(<span class="kw">new</span> BasicCoffee()));
<span class="cm">// cost() ‚Üí 80, description() ‚Üí "Coffee + Milk + Sugar"</span></code></pre>

<div class="section-divider"></div>

<h3>Adapter ‚Äî Make Incompatible Things Work Together</h3>
<pre><code><span class="cm">// Old payment system</span>
<span class="kw">class</span> <span class="tp">OldPaymentGateway</span> {
    <span class="kw">void</span> <span class="fn">makePayment</span>(<span class="kw">double</span> amount) { <span class="cm">/* old API */</span> }
}

<span class="cm">// New interface your system expects</span>
<span class="kw">interface</span> <span class="tp">PaymentProcessor</span> {
    <span class="kw">void</span> <span class="fn">pay</span>(<span class="kw">double</span> amount, String currency);
}

<span class="cm">// Adapter bridges old and new</span>
<span class="kw">class</span> <span class="tp">PaymentAdapter</span> <span class="kw">implements</span> <span class="tp">PaymentProcessor</span> {
    <span class="kw">private</span> OldPaymentGateway gateway;

    <span class="tp">PaymentAdapter</span>(OldPaymentGateway gw) { <span class="kw">this</span>.gateway = gw; }

    <span class="kw">public void</span> <span class="fn">pay</span>(<span class="kw">double</span> amount, String currency) {
        <span class="cm">// adapt the interface</span>
        gateway.<span class="fn">makePayment</span>(amount);
    }
}</code></pre>
`
            },
            {
                title: "Command & Template Method",
                content: `
<h3>Command ‚Äî Encapsulate Requests as Objects</h3>
<p><strong>Problem:</strong> You want to queue, log, or undo operations. Each operation becomes an object.</p>

<pre><code><span class="kw">interface</span> <span class="tp">Command</span> {
    <span class="kw">void</span> <span class="fn">execute</span>();
    <span class="kw">void</span> <span class="fn">undo</span>();
}

<span class="kw">class</span> <span class="tp">LightOnCommand</span> <span class="kw">implements</span> <span class="tp">Command</span> {
    <span class="kw">private</span> Light light;
    <span class="tp">LightOnCommand</span>(Light l) { <span class="kw">this</span>.light = l; }
    <span class="kw">public void</span> <span class="fn">execute</span>() { light.turnOn(); }
    <span class="kw">public void</span> <span class="fn">undo</span>()    { light.turnOff(); }
}

<span class="kw">class</span> <span class="tp">RemoteControl</span> {
    <span class="kw">private</span> List&lt;Command&gt; history = <span class="kw">new</span> ArrayList&lt;&gt;();

    <span class="kw">void</span> <span class="fn">pressButton</span>(Command cmd) {
        cmd.<span class="fn">execute</span>();
        history.add(cmd);
    }

    <span class="kw">void</span> <span class="fn">undoLast</span>() {
        <span class="kw">if</span> (!history.isEmpty()) {
            history.remove(history.size()-<span class="nu">1</span>).<span class="fn">undo</span>();
        }
    }
}</code></pre>

<div class="section-divider"></div>

<h3>Template Method ‚Äî Define Algorithm Skeleton</h3>
<pre><code><span class="kw">abstract class</span> <span class="tp">OrderProcessor</span> {
    <span class="cm">// Template method ‚Äî defines the steps</span>
    <span class="kw">public final void</span> <span class="fn">processOrder</span>() {
        <span class="fn">validateOrder</span>();
        <span class="fn">calculateTotal</span>();
        <span class="fn">processPayment</span>();   <span class="cm">// subclass implements this</span>
        <span class="fn">sendConfirmation</span>();
    }

    <span class="kw">void</span> <span class="fn">validateOrder</span>() { System.out.println(<span class="st">"Validating..."</span>); }
    <span class="kw">void</span> <span class="fn">calculateTotal</span>() { System.out.println(<span class="st">"Calculating..."</span>); }
    <span class="kw">void</span> <span class="fn">sendConfirmation</span>() { System.out.println(<span class="st">"Confirmed!"</span>); }

    <span class="cm">// Each subclass provides its own implementation</span>
    <span class="kw">abstract void</span> <span class="fn">processPayment</span>();
}

<span class="kw">class</span> <span class="tp">CreditCardOrder</span> <span class="kw">extends</span> <span class="tp">OrderProcessor</span> {
    <span class="kw">void</span> <span class="fn">processPayment</span>() { System.out.println(<span class="st">"Credit card charged"</span>); }
}
<span class="kw">class</span> <span class="tp">CODOrder</span> <span class="kw">extends</span> <span class="tp">OrderProcessor</span> {
    <span class="kw">void</span> <span class="fn">processPayment</span>() { System.out.println(<span class="st">"Cash on delivery"</span>); }
}</code></pre>
`
            }
        ]
    },
    // ============================================================
    // MODULE 4: UML DIAGRAMS & LLD INTERVIEW FRAMEWORK
    // ============================================================
    {
        title: "UML & Interview Framework",
        topics: [
            {
                title: "Class Diagrams ‚Äî The Visual Language",
                content: `
<h3>What is a Class Diagram?</h3>
<p>A <strong>class diagram</strong> is a visual drawing that shows: what classes exist, what they contain, and how they relate. It's the <em>blueprint</em> interviewers expect you to draw on the whiteboard.</p>

<h4>How to Draw a Class</h4>
<div class="uml-box">
  <div class="uml-title">Car</div>
  <div class="uml-section">
    - brand: String<br>
    - speed: int<br>
    - color: String
  </div>
  <div class="uml-section">
    + accelerate(): void<br>
    + brake(): void<br>
    + getSpeed(): int
  </div>
</div>

<p>Each class box has <strong>3 sections</strong>:</p>
<table>
<tr><th>Section</th><th>Contains</th><th>Example</th></tr>
<tr><td>Top</td><td>Class name</td><td>Car</td></tr>
<tr><td>Middle</td><td>Attributes (fields)</td><td>- brand: String</td></tr>
<tr><td>Bottom</td><td>Methods</td><td>+ accelerate(): void</td></tr>
</table>

<h4>Access Modifier Symbols</h4>
<table>
<tr><th>Symbol</th><th>Modifier</th><th>Meaning</th></tr>
<tr><td><code>+</code></td><td>public</td><td>Anyone can access</td></tr>
<tr><td><code>-</code></td><td>private</td><td>Only this class</td></tr>
<tr><td><code>#</code></td><td>protected</td><td>This class + children</td></tr>
</table>

<h3>Relationships Between Classes</h3>

<h4>1. Association (uses / knows about)</h4>
<p>One class uses another. Drawn as a simple line.</p>
<pre><code><span class="cm">// Driver USES a Car (association)</span>
<span class="kw">class</span> <span class="tp">Driver</span> {
    <span class="kw">private</span> Car car;  <span class="cm">// Driver knows about Car</span>
}
<span class="cm">// UML: Driver ‚Äî‚Äî‚Äî‚Äî Car</span></code></pre>

<h4>2. Inheritance / Generalization (IS-A)</h4>
<p>Child class extends parent. Drawn as line with hollow triangle arrow.</p>
<pre><code><span class="cm">// SportsCar IS-A Car</span>
<span class="kw">class</span> <span class="tp">SportsCar</span> <span class="kw">extends</span> <span class="tp">Car</span> { }
<span class="cm">// UML: SportsCar ‚Äî‚Äî‚ñ∑ Car</span></code></pre>

<h4>3. Implementation (implements interface)</h4>
<p>Class implements interface. Drawn as dashed line with hollow triangle.</p>
<pre><code><span class="cm">// Dog implements Walkable</span>
<span class="kw">class</span> <span class="tp">Dog</span> <span class="kw">implements</span> <span class="tp">Walkable</span> { }
<span class="cm">// UML: Dog ----‚ñ∑ Walkable</span></code></pre>

<h4>4. Composition (HAS-A, strong ‚Äî part dies with whole)</h4>
<p>Drawn as line with filled diamond. If the Car is destroyed, its Engine is too.</p>
<pre><code><span class="cm">// Car HAS-A Engine (composition ‚Äî engine dies with car)</span>
<span class="kw">class</span> <span class="tp">Car</span> {
    <span class="kw">private</span> Engine engine = <span class="kw">new</span> Engine();
}
<span class="cm">// UML: Car ‚óÜ‚Äî‚Äî‚Äî‚Äî Engine</span></code></pre>

<h4>5. Aggregation (HAS-A, weak ‚Äî part can live independently)</h4>
<p>Drawn as line with hollow diamond. A Team has Players, but players exist without the team.</p>
<pre><code><span class="cm">// Team HAS Players (aggregation ‚Äî players exist independently)</span>
<span class="kw">class</span> <span class="tp">Team</span> {
    <span class="kw">private</span> List&lt;Player&gt; players;
}
<span class="cm">// UML: Team ‚óá‚Äî‚Äî‚Äî‚Äî Player</span></code></pre>

<h4>Quick Reference Cheat Sheet</h4>
<table>
<tr><th>Relationship</th><th>Symbol</th><th>Java Keyword</th><th>Example</th></tr>
<tr><td>Inheritance</td><td>‚Äî‚Äî‚ñ∑</td><td><code>extends</code></td><td>Dog extends Animal</td></tr>
<tr><td>Interface</td><td>----‚ñ∑</td><td><code>implements</code></td><td>Dog implements Walkable</td></tr>
<tr><td>Composition</td><td>‚óÜ‚Äî‚Äî‚Äî‚Äî</td><td>field created internally</td><td>Car has Engine</td></tr>
<tr><td>Aggregation</td><td>‚óá‚Äî‚Äî‚Äî‚Äî</td><td>field passed in</td><td>Team has Players</td></tr>
<tr><td>Association</td><td>‚Äî‚Äî‚Äî‚Äî</td><td>field reference</td><td>Driver uses Car</td></tr>
</table>

<div class="callout interview"><div class="callout-title">üéØ Interview Tip</div><p>In the interview, spend 5-7 minutes drawing the class diagram on the whiteboard BEFORE writing code. It shows you think before you code ‚Äî interviewers LOVE this.</p></div>
`
            },
            {
                title: "The 45-Minute LLD Interview Framework",
                content: `
<h3>The 5-Step Framework</h3>
<p>Every FAANG LLD interview is ~45 minutes. Here's exactly how to spend your time:</p>

<table>
<tr><th>Step</th><th>Time</th><th>What to Do</th></tr>
<tr><td><strong>1. Clarify Requirements</strong></td><td>5 min</td><td>Ask questions, list features, define scope</td></tr>
<tr><td><strong>2. Identify Classes</strong></td><td>5 min</td><td>List all entities (nouns = classes)</td></tr>
<tr><td><strong>3. Draw Class Diagram</strong></td><td>7 min</td><td>Show relationships, key attributes, methods</td></tr>
<tr><td><strong>4. Write Core Code</strong></td><td>20 min</td><td>Implement the main classes and logic</td></tr>
<tr><td><strong>5. Discuss & Extend</strong></td><td>8 min</td><td>Talk about edge cases, scalability, patterns used</td></tr>
</table>

<h3>Step 1: Clarify Requirements</h3>
<p>ALWAYS ask questions before coding. This shows maturity.</p>
<pre><code><span class="cm">Example: "Design a Parking Lot"</span>

<span class="cm">Questions to ask:</span>
<span class="st">‚Ä¢ How many floors/levels?</span>
<span class="st">‚Ä¢ What types of vehicles? (car, bike, truck)</span>
<span class="st">‚Ä¢ Is it paid parking? How is pricing done?</span>
<span class="st">‚Ä¢ Do we need entry/exit gates?</span>
<span class="st">‚Ä¢ Do we need a ticket system?</span>
<span class="st">‚Ä¢ What about handicapped spots?</span>
<span class="st">‚Ä¢ Is there a display board showing available spots?</span></code></pre>

<h3>Step 2: Identify Classes (Noun Extraction)</h3>
<p>Read the requirements and <strong>circle all nouns</strong> ‚Äî they become your classes!</p>
<pre><code><span class="cm">"A PARKING LOT has multiple FLOORS. Each FLOOR has</span>
<span class="cm"> PARKING SPOTS of different sizes. A VEHICLE enters</span>
<span class="cm"> through a GATE and gets a TICKET. The TICKET is used</span>
<span class="cm"> for PAYMENT when the vehicle exits."</span>

<span class="cm">Classes identified:</span>
<span class="st">ParkingLot, Floor, ParkingSpot, Vehicle, Gate, Ticket, Payment</span></code></pre>

<h3>Step 3: Define Relationships</h3>
<pre><code><span class="cm">ParkingLot HAS-A List&lt;Floor&gt;           (composition)</span>
<span class="cm">Floor HAS-A List&lt;ParkingSpot&gt;          (composition)</span>
<span class="cm">ParkingSpot HAS-A Vehicle              (association)</span>
<span class="cm">Ticket HAS-A Vehicle, ParkingSpot      (association)</span>
<span class="cm">Vehicle IS-A: Car, Bike, Truck         (inheritance)</span>
<span class="cm">ParkingSpot IS-A: Small, Medium, Large (inheritance/enum)</span></code></pre>

<h3>Step 4: Code Core Classes</h3>
<p>Start with enums ‚Üí models ‚Üí services. Always write clean, SOLID code.</p>

<h3>Step 5: Discuss Extensions</h3>
<div class="callout tip"><div class="callout-title">Things interviewers love to hear</div>
<p>‚Ä¢ "I used Strategy pattern for pricing so new pricing rules can be added without changing core code"<br>
‚Ä¢ "I used Observer pattern to notify the display board when spots change"<br>
‚Ä¢ "I kept Vehicle abstract so new vehicle types can be added (Open/Closed)"<br>
‚Ä¢ "ParkingSpot assignment is a separate class for Single Responsibility"</p></div>
`
            },
            {
                title: "What Interviewers Actually Look For",
                content: `
<h3>The LLD Evaluation Rubric</h3>
<p>Having interviewed 100+ candidates, here's what gets a <strong>Strong Hire</strong> vs <strong>Reject</strong>:</p>

<table>
<tr><th>Criteria</th><th>‚ùå Reject</th><th>‚úÖ Strong Hire</th></tr>
<tr><td><strong>Requirements</strong></td><td>Jumps to code immediately</td><td>Asks 5+ clarifying questions first</td></tr>
<tr><td><strong>Classes</strong></td><td>God class with everything</td><td>Small, focused classes (SRP)</td></tr>
<tr><td><strong>Relationships</strong></td><td>No class diagram</td><td>Clear diagram before coding</td></tr>
<tr><td><strong>Extensibility</strong></td><td>Hardcoded types, if-else chains</td><td>Interfaces + Strategy pattern</td></tr>
<tr><td><strong>Enums</strong></td><td>Uses strings for types/status</td><td>Proper enums everywhere</td></tr>
<tr><td><strong>Encapsulation</strong></td><td>All public fields</td><td>Private fields + getters/setters</td></tr>
<tr><td><strong>Naming</strong></td><td>a, b, x</td><td>Descriptive names: parkVehicle(), calculateFee()</td></tr>
<tr><td><strong>Patterns</strong></td><td>No patterns mentioned</td><td>Names and justifies 2-3 patterns</td></tr>
</table>

<div class="callout interview"><div class="callout-title">üéØ Golden Rules</div>
<p>1. <strong>Ask questions first</strong> ‚Äî show you think before coding<br>
2. <strong>Draw before you code</strong> ‚Äî class diagram = thinking tool<br>
3. <strong>Use enums, not strings</strong> ‚Äî for types, status, roles<br>
4. <strong>Make fields private</strong> ‚Äî always encapsulate<br>
5. <strong>Use interfaces</strong> ‚Äî for behaviors that can vary<br>
6. <strong>Name patterns</strong> ‚Äî "I'm using Strategy here because..."<br>
7. <strong>Think about extensibility</strong> ‚Äî "If we want to add X later, we just..."</p></div>
`
            }
        ]
    },
{
        title: "LLD Practice Problems",
        topics: [
            {
                title: "1. Parking Lot System ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                content: `
<h3>üÖøÔ∏è Design a Parking Lot System</h3>
<div class="callout important"><div class="callout-title">Most Asked LLD Problem ‚Äî Asked at Google, Amazon, Microsoft, Uber</div><p>If you solve only ONE problem, solve this. It covers 80% of LLD concepts.</p></div>

<h4>Requirements</h4>
<ul>
<li>Multi-floor parking lot with different spot sizes (Small, Medium, Large)</li>
<li>Vehicles: Car, Bike, Truck ‚Äî each needs appropriate spot size</li>
<li>Entry/Exit gates with ticket system</li>
<li>Pricing: hourly rates based on vehicle type</li>
<li>Display board showing available spots per floor</li>
</ul>

<h4>Class Diagram</h4>
<div class="uml-box"><div class="uml-title">ParkingLot (Singleton)</div>
<div class="uml-section">- floors: List&lt;Floor&gt;<br>- gates: List&lt;Gate&gt;</div>
<div class="uml-section">+ parkVehicle(Vehicle): Ticket<br>+ unparkVehicle(Ticket): Payment</div></div>

<div class="uml-box"><div class="uml-title">Floor</div>
<div class="uml-section">- floorNumber: int<br>- spots: List&lt;ParkingSpot&gt;</div>
<div class="uml-section">+ getAvailableSpot(VehicleType): ParkingSpot</div></div>

<div class="uml-box"><div class="uml-title">ParkingSpot</div>
<div class="uml-section">- spotId: String<br>- size: SpotSize<br>- vehicle: Vehicle<br>- isAvailable: boolean</div>
<div class="uml-section">+ park(Vehicle): void<br>+ removeVehicle(): Vehicle</div></div>

<h4>Complete Code</h4>
<pre><code><span class="cm">// ===== ENUMS =====</span>
<span class="kw">enum</span> <span class="tp">VehicleType</span>  { BIKE, CAR, TRUCK }
<span class="kw">enum</span> <span class="tp">SpotSize</span>     { SMALL, MEDIUM, LARGE }
<span class="kw">enum</span> <span class="tp">TicketStatus</span> { ACTIVE, PAID }

<span class="cm">// ===== VEHICLE (Abstract) =====</span>
<span class="kw">abstract class</span> <span class="tp">Vehicle</span> {
    <span class="kw">private</span> String licensePlate;
    <span class="kw">private</span> VehicleType type;

    <span class="tp">Vehicle</span>(String plate, VehicleType type) {
        <span class="kw">this</span>.licensePlate = plate;
        <span class="kw">this</span>.type = type;
    }
    <span class="kw">public</span> VehicleType <span class="fn">getType</span>() { <span class="kw">return</span> type; }
    <span class="kw">public</span> String <span class="fn">getPlate</span>() { <span class="kw">return</span> licensePlate; }
}

<span class="kw">class</span> <span class="tp">Car</span> <span class="kw">extends</span> <span class="tp">Vehicle</span>   { <span class="tp">Car</span>(String p)   { <span class="kw">super</span>(p, VehicleType.CAR); } }
<span class="kw">class</span> <span class="tp">Bike</span> <span class="kw">extends</span> <span class="tp">Vehicle</span>  { <span class="tp">Bike</span>(String p)  { <span class="kw">super</span>(p, VehicleType.BIKE); } }
<span class="kw">class</span> <span class="tp">Truck</span> <span class="kw">extends</span> <span class="tp">Vehicle</span> { <span class="tp">Truck</span>(String p) { <span class="kw">super</span>(p, VehicleType.TRUCK); } }

<span class="cm">// ===== PARKING SPOT =====</span>
<span class="kw">class</span> <span class="tp">ParkingSpot</span> {
    <span class="kw">private</span> String spotId;
    <span class="kw">private</span> SpotSize size;
    <span class="kw">private</span> Vehicle vehicle;

    <span class="tp">ParkingSpot</span>(String id, SpotSize size) {
        <span class="kw">this</span>.spotId = id;
        <span class="kw">this</span>.size = size;
    }

    <span class="kw">public boolean</span> <span class="fn">isAvailable</span>() { <span class="kw">return</span> vehicle == <span class="kw">null</span>; }

    <span class="kw">public boolean</span> <span class="fn">canFit</span>(VehicleType vType) {
        <span class="kw">if</span> (vType == VehicleType.BIKE)  <span class="kw">return</span> size == SpotSize.SMALL;
        <span class="kw">if</span> (vType == VehicleType.CAR)   <span class="kw">return</span> size == SpotSize.MEDIUM;
        <span class="kw">if</span> (vType == VehicleType.TRUCK) <span class="kw">return</span> size == SpotSize.LARGE;
        <span class="kw">return false</span>;
    }

    <span class="kw">public void</span> <span class="fn">park</span>(Vehicle v) { <span class="kw">this</span>.vehicle = v; }
    <span class="kw">public</span> Vehicle <span class="fn">removeVehicle</span>() {
        Vehicle v = <span class="kw">this</span>.vehicle;
        <span class="kw">this</span>.vehicle = <span class="kw">null</span>;
        <span class="kw">return</span> v;
    }

    <span class="kw">public</span> String <span class="fn">getSpotId</span>() { <span class="kw">return</span> spotId; }
    <span class="kw">public</span> SpotSize <span class="fn">getSize</span>() { <span class="kw">return</span> size; }
}

<span class="cm">// ===== TICKET =====</span>
<span class="kw">class</span> <span class="tp">Ticket</span> {
    <span class="kw">private</span> String ticketId;
    <span class="kw">private</span> Vehicle vehicle;
    <span class="kw">private</span> ParkingSpot spot;
    <span class="kw">private long</span> entryTime;
    <span class="kw">private</span> TicketStatus status;

    <span class="tp">Ticket</span>(Vehicle v, ParkingSpot spot) {
        <span class="kw">this</span>.ticketId = UUID.randomUUID().toString();
        <span class="kw">this</span>.vehicle = v;
        <span class="kw">this</span>.spot = spot;
        <span class="kw">this</span>.entryTime = System.currentTimeMillis();
        <span class="kw">this</span>.status = TicketStatus.ACTIVE;
    }

    <span class="kw">public long</span> <span class="fn">getParkedHours</span>() {
        <span class="kw">return</span> (System.currentTimeMillis() - entryTime) / <span class="nu">3600000</span> + <span class="nu">1</span>;
    }
    <span class="kw">public void</span> <span class="fn">markPaid</span>() { status = TicketStatus.PAID; }
    <span class="cm">// getters...</span>
}

<span class="cm">// ===== PRICING STRATEGY (Strategy Pattern) =====</span>
<span class="kw">interface</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">double</span> <span class="fn">calculate</span>(Ticket ticket);
}

<span class="kw">class</span> <span class="tp">HourlyPricing</span> <span class="kw">implements</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">private</span> Map&lt;VehicleType, Double&gt; rates = <span class="kw">new</span> HashMap&lt;&gt;();

    <span class="tp">HourlyPricing</span>() {
        rates.put(VehicleType.BIKE,  <span class="nu">10.0</span>);
        rates.put(VehicleType.CAR,   <span class="nu">20.0</span>);
        rates.put(VehicleType.TRUCK, <span class="nu">30.0</span>);
    }

    <span class="kw">public double</span> <span class="fn">calculate</span>(Ticket t) {
        <span class="kw">return</span> t.<span class="fn">getParkedHours</span>() * rates.get(t.getVehicle().getType());
    }
}

<span class="cm">// ===== FLOOR =====</span>
<span class="kw">class</span> <span class="tp">Floor</span> {
    <span class="kw">private int</span> floorNumber;
    <span class="kw">private</span> List&lt;ParkingSpot&gt; spots;

    <span class="tp">Floor</span>(<span class="kw">int</span> num, List&lt;ParkingSpot&gt; spots) {
        <span class="kw">this</span>.floorNumber = num;
        <span class="kw">this</span>.spots = spots;
    }

    <span class="kw">public</span> ParkingSpot <span class="fn">findAvailableSpot</span>(VehicleType type) {
        <span class="kw">for</span> (ParkingSpot spot : spots) {
            <span class="kw">if</span> (spot.<span class="fn">isAvailable</span>() && spot.<span class="fn">canFit</span>(type)) {
                <span class="kw">return</span> spot;
            }
        }
        <span class="kw">return null</span>;
    }
}

<span class="cm">// ===== PARKING LOT (Singleton) =====</span>
<span class="kw">class</span> <span class="tp">ParkingLot</span> {
    <span class="kw">private static</span> ParkingLot instance;
    <span class="kw">private</span> List&lt;Floor&gt; floors;
    <span class="kw">private</span> PricingStrategy pricing;

    <span class="kw">private</span> <span class="tp">ParkingLot</span>(List&lt;Floor&gt; floors) {
        <span class="kw">this</span>.floors = floors;
        <span class="kw">this</span>.pricing = <span class="kw">new</span> HourlyPricing();
    }

    <span class="kw">public</span> Ticket <span class="fn">parkVehicle</span>(Vehicle vehicle) {
        <span class="kw">for</span> (Floor floor : floors) {
            ParkingSpot spot = floor.<span class="fn">findAvailableSpot</span>(vehicle.<span class="fn">getType</span>());
            <span class="kw">if</span> (spot != <span class="kw">null</span>) {
                spot.<span class="fn">park</span>(vehicle);
                <span class="kw">return new</span> Ticket(vehicle, spot);
            }
        }
        <span class="kw">throw new</span> RuntimeException(<span class="st">"No spot available!"</span>);
    }

    <span class="kw">public double</span> <span class="fn">unparkVehicle</span>(Ticket ticket) {
        ticket.getSpot().<span class="fn">removeVehicle</span>();
        <span class="kw">double</span> fee = pricing.<span class="fn">calculate</span>(ticket);
        ticket.<span class="fn">markPaid</span>();
        <span class="kw">return</span> fee;
    }
}</code></pre>

<div class="callout interview"><div class="callout-title">üéØ Patterns Used</div>
<p>‚úÖ <strong>Singleton</strong> ‚Äî ParkingLot (only one instance)<br>
‚úÖ <strong>Strategy</strong> ‚Äî PricingStrategy (swappable pricing logic)<br>
‚úÖ <strong>Factory</strong> ‚Äî Can add VehicleFactory for creating vehicles<br>
‚úÖ <strong>SOLID</strong> ‚Äî Each class has single responsibility</p></div>
`
            },
            {
                title: "2. Elevator System ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                content: `
<h3>üõó Design an Elevator System</h3>
<div class="callout important"><div class="callout-title">Top 3 Most Asked ‚Äî Amazon, Google, Flipkart</div><p>Tests State pattern, multi-threading concepts, and scheduling algorithms.</p></div>

<h4>Requirements</h4>
<ul>
<li>Building with N floors and M elevators</li>
<li>Users can request elevator from any floor (up/down buttons)</li>
<li>Users inside elevator select destination floor</li>
<li>Elevator moves efficiently (doesn't skip floors with requests)</li>
<li>Door open/close mechanism</li>
</ul>

<pre><code><span class="cm">// ===== ENUMS =====</span>
<span class="kw">enum</span> <span class="tp">Direction</span>     { UP, DOWN, IDLE }
<span class="kw">enum</span> <span class="tp">DoorState</span>     { OPEN, CLOSED }
<span class="kw">enum</span> <span class="tp">ElevatorState</span> { MOVING, STOPPED, IDLE }

<span class="cm">// ===== REQUEST =====</span>
<span class="kw">class</span> <span class="tp">Request</span> {
    <span class="kw">private int</span> floor;
    <span class="kw">private</span> Direction direction;

    <span class="tp">Request</span>(<span class="kw">int</span> floor, Direction dir) {
        <span class="kw">this</span>.floor = floor;
        <span class="kw">this</span>.direction = dir;
    }
    <span class="kw">public int</span> <span class="fn">getFloor</span>() { <span class="kw">return</span> floor; }
}

<span class="cm">// ===== ELEVATOR =====</span>
<span class="kw">class</span> <span class="tp">Elevator</span> {
    <span class="kw">private int</span> id;
    <span class="kw">private int</span> currentFloor;
    <span class="kw">private</span> Direction direction;
    <span class="kw">private</span> ElevatorState state;
    <span class="kw">private</span> DoorState door;
    <span class="kw">private</span> Set&lt;Integer&gt; destinationFloors;

    <span class="tp">Elevator</span>(<span class="kw">int</span> id) {
        <span class="kw">this</span>.id = id;
        <span class="kw">this</span>.currentFloor = <span class="nu">0</span>;
        <span class="kw">this</span>.direction = Direction.IDLE;
        <span class="kw">this</span>.state = ElevatorState.IDLE;
        <span class="kw">this</span>.door = DoorState.CLOSED;
        <span class="kw">this</span>.destinationFloors = <span class="kw">new</span> TreeSet&lt;&gt;();
    }

    <span class="kw">public void</span> <span class="fn">addDestination</span>(<span class="kw">int</span> floor) {
        destinationFloors.add(floor);
        <span class="kw">if</span> (state == ElevatorState.IDLE) {
            direction = floor > currentFloor ? Direction.UP : Direction.DOWN;
            state = ElevatorState.MOVING;
        }
    }

    <span class="kw">public void</span> <span class="fn">move</span>() {
        <span class="kw">if</span> (destinationFloors.isEmpty()) {
            state = ElevatorState.IDLE;
            direction = Direction.IDLE;
            <span class="kw">return</span>;
        }

        <span class="kw">if</span> (direction == Direction.UP) currentFloor++;
        <span class="kw">else if</span> (direction == Direction.DOWN) currentFloor--;

        <span class="kw">if</span> (destinationFloors.contains(currentFloor)) {
            <span class="fn">stop</span>();
            destinationFloors.remove(currentFloor);
        }
    }

    <span class="kw">private void</span> <span class="fn">stop</span>() {
        state = ElevatorState.STOPPED;
        door = DoorState.OPEN;
        System.out.println(<span class="st">"Elevator "</span> + id + <span class="st">" stopped at floor "</span> + currentFloor);
        <span class="cm">// simulate door timer</span>
        door = DoorState.CLOSED;
        state = ElevatorState.MOVING;
    }

    <span class="kw">public int</span> <span class="fn">getCurrentFloor</span>() { <span class="kw">return</span> currentFloor; }
    <span class="kw">public</span> Direction <span class="fn">getDirection</span>() { <span class="kw">return</span> direction; }
    <span class="kw">public boolean</span> <span class="fn">isIdle</span>() { <span class="kw">return</span> state == ElevatorState.IDLE; }
}

<span class="cm">// ===== ELEVATOR CONTROLLER (Singleton) =====</span>
<span class="kw">class</span> <span class="tp">ElevatorController</span> {
    <span class="kw">private</span> List&lt;Elevator&gt; elevators;

    <span class="tp">ElevatorController</span>(<span class="kw">int</span> numElevators) {
        elevators = <span class="kw">new</span> ArrayList&lt;&gt;();
        <span class="kw">for</span> (<span class="kw">int</span> i = <span class="nu">0</span>; i < numElevators; i++) {
            elevators.add(<span class="kw">new</span> Elevator(i));
        }
    }

    <span class="kw">public</span> Elevator <span class="fn">requestElevator</span>(<span class="kw">int</span> floor, Direction dir) {
        Elevator best = <span class="kw">null</span>;
        <span class="kw">int</span> minDist = Integer.MAX_VALUE;

        <span class="kw">for</span> (Elevator e : elevators) {
            <span class="kw">int</span> dist = Math.abs(e.<span class="fn">getCurrentFloor</span>() - floor);
            <span class="kw">if</span> (e.<span class="fn">isIdle</span>() && dist < minDist) {
                best = e;
                minDist = dist;
            }
        }
        <span class="kw">if</span> (best != <span class="kw">null</span>) {
            best.<span class="fn">addDestination</span>(floor);
        }
        <span class="kw">return</span> best;
    }
}</code></pre>

<div class="callout tip"><div class="callout-title">Key Design Decisions</div>
<p>‚Ä¢ <strong>State pattern</strong> for elevator states (IDLE, MOVING, STOPPED)<br>
‚Ä¢ <strong>Strategy pattern</strong> for elevator scheduling algorithm<br>
‚Ä¢ <strong>TreeSet</strong> for ordered destination floors<br>
‚Ä¢ <strong>Singleton</strong> for ElevatorController</p></div>
`
            },
            {
                title: "3. Tic Tac Toe ‚òÖ‚òÖ‚òÖ‚òÖ",
                content: `
<h3>‚ùå‚≠ï Design Tic Tac Toe</h3>
<div class="callout important"><div class="callout-title">Great Starter Problem ‚Äî Amazon, Microsoft, Meta</div><p>Simple enough to code in 30 min. Tests OOP modeling and game logic separation.</p></div>

<pre><code><span class="cm">// ===== ENUMS =====</span>
<span class="kw">enum</span> <span class="tp">PieceType</span>   { X, O }
<span class="kw">enum</span> <span class="tp">GameStatus</span>  { IN_PROGRESS, X_WINS, O_WINS, DRAW }

<span class="cm">// ===== PLAYER =====</span>
<span class="kw">class</span> <span class="tp">Player</span> {
    <span class="kw">private</span> String name;
    <span class="kw">private</span> PieceType piece;

    <span class="tp">Player</span>(String name, PieceType piece) {
        <span class="kw">this</span>.name = name;
        <span class="kw">this</span>.piece = piece;
    }
    <span class="kw">public</span> PieceType <span class="fn">getPiece</span>() { <span class="kw">return</span> piece; }
    <span class="kw">public</span> String <span class="fn">getName</span>() { <span class="kw">return</span> name; }
}

<span class="cm">// ===== BOARD =====</span>
<span class="kw">class</span> <span class="tp">Board</span> {
    <span class="kw">private</span> PieceType[][] grid;
    <span class="kw">private int</span> size;
    <span class="kw">private int</span> movesCount;

    <span class="tp">Board</span>(<span class="kw">int</span> size) {
        <span class="kw">this</span>.size = size;
        <span class="kw">this</span>.grid = <span class="kw">new</span> PieceType[size][size];
        <span class="kw">this</span>.movesCount = <span class="nu">0</span>;
    }

    <span class="kw">public boolean</span> <span class="fn">placePiece</span>(<span class="kw">int</span> row, <span class="kw">int</span> col, PieceType piece) {
        <span class="kw">if</span> (row < <span class="nu">0</span> || row >= size || col < <span class="nu">0</span> || col >= size || grid[row][col] != <span class="kw">null</span>) {
            <span class="kw">return false</span>;
        }
        grid[row][col] = piece;
        movesCount++;
        <span class="kw">return true</span>;
    }

    <span class="kw">public boolean</span> <span class="fn">checkWin</span>(PieceType piece) {
        <span class="cm">// Check rows, columns, diagonals</span>
        <span class="kw">for</span> (<span class="kw">int</span> i = <span class="nu">0</span>; i < size; i++) {
            <span class="kw">if</span> (<span class="fn">checkLine</span>(piece, i, <span class="nu">0</span>, <span class="nu">0</span>, <span class="nu">1</span>)) <span class="kw">return true</span>; <span class="cm">// row</span>
            <span class="kw">if</span> (<span class="fn">checkLine</span>(piece, <span class="nu">0</span>, i, <span class="nu">1</span>, <span class="nu">0</span>)) <span class="kw">return true</span>; <span class="cm">// col</span>
        }
        <span class="kw">if</span> (<span class="fn">checkLine</span>(piece, <span class="nu">0</span>, <span class="nu">0</span>, <span class="nu">1</span>, <span class="nu">1</span>)) <span class="kw">return true</span>; <span class="cm">// diagonal</span>
        <span class="kw">if</span> (<span class="fn">checkLine</span>(piece, <span class="nu">0</span>, size-<span class="nu">1</span>, <span class="nu">1</span>, -<span class="nu">1</span>)) <span class="kw">return true</span>; <span class="cm">// anti-diag</span>
        <span class="kw">return false</span>;
    }

    <span class="kw">private boolean</span> <span class="fn">checkLine</span>(PieceType p, <span class="kw">int</span> r, <span class="kw">int</span> c, <span class="kw">int</span> dr, <span class="kw">int</span> dc) {
        <span class="kw">for</span> (<span class="kw">int</span> i = <span class="nu">0</span>; i < size; i++) {
            <span class="kw">if</span> (grid[r + i*dr][c + i*dc] != p) <span class="kw">return false</span>;
        }
        <span class="kw">return true</span>;
    }

    <span class="kw">public boolean</span> <span class="fn">isFull</span>() { <span class="kw">return</span> movesCount == size * size; }
}

<span class="cm">// ===== GAME =====</span>
<span class="kw">class</span> <span class="tp">TicTacToeGame</span> {
    <span class="kw">private</span> Board board;
    <span class="kw">private</span> Player[] players;
    <span class="kw">private int</span> currentPlayerIdx;
    <span class="kw">private</span> GameStatus status;

    <span class="tp">TicTacToeGame</span>(Player p1, Player p2, <span class="kw">int</span> boardSize) {
        <span class="kw">this</span>.board = <span class="kw">new</span> Board(boardSize);
        <span class="kw">this</span>.players = <span class="kw">new</span> Player[]{p1, p2};
        <span class="kw">this</span>.currentPlayerIdx = <span class="nu">0</span>;
        <span class="kw">this</span>.status = GameStatus.IN_PROGRESS;
    }

    <span class="kw">public</span> GameStatus <span class="fn">makeMove</span>(<span class="kw">int</span> row, <span class="kw">int</span> col) {
        Player current = players[currentPlayerIdx];

        <span class="kw">if</span> (!board.<span class="fn">placePiece</span>(row, col, current.<span class="fn">getPiece</span>())) {
            <span class="kw">throw new</span> IllegalArgumentException(<span class="st">"Invalid move!"</span>);
        }

        <span class="kw">if</span> (board.<span class="fn">checkWin</span>(current.<span class="fn">getPiece</span>())) {
            status = current.<span class="fn">getPiece</span>() == PieceType.X ? GameStatus.X_WINS : GameStatus.O_WINS;
        } <span class="kw">else if</span> (board.<span class="fn">isFull</span>()) {
            status = GameStatus.DRAW;
        } <span class="kw">else</span> {
            currentPlayerIdx = <span class="nu">1</span> - currentPlayerIdx; <span class="cm">// switch player</span>
        }
        <span class="kw">return</span> status;
    }
}</code></pre>
`
            },
            {
                title: "4. Snake and Ladder ‚òÖ‚òÖ‚òÖ‚òÖ",
                content: `
<h3>üêçü™ú Design Snake and Ladder</h3>

<pre><code><span class="cm">// ===== CORE CLASSES =====</span>
<span class="kw">class</span> <span class="tp">Jump</span> {
    <span class="kw">int</span> start, end;
    <span class="tp">Jump</span>(<span class="kw">int</span> s, <span class="kw">int</span> e) { <span class="kw">this</span>.start = s; <span class="kw">this</span>.end = e; }
}

<span class="kw">class</span> <span class="tp">Player</span> {
    <span class="kw">private</span> String name;
    <span class="kw">private int</span> position;

    <span class="tp">Player</span>(String name) { <span class="kw">this</span>.name = name; <span class="kw">this</span>.position = <span class="nu">0</span>; }
    <span class="kw">public int</span> <span class="fn">getPosition</span>() { <span class="kw">return</span> position; }
    <span class="kw">public void</span> <span class="fn">setPosition</span>(<span class="kw">int</span> p) { <span class="kw">this</span>.position = p; }
    <span class="kw">public</span> String <span class="fn">getName</span>() { <span class="kw">return</span> name; }
}

<span class="kw">class</span> <span class="tp">Dice</span> {
    <span class="kw">private int</span> numDice;
    <span class="kw">private</span> Random random = <span class="kw">new</span> Random();

    <span class="tp">Dice</span>(<span class="kw">int</span> numDice) { <span class="kw">this</span>.numDice = numDice; }

    <span class="kw">public int</span> <span class="fn">roll</span>() {
        <span class="kw">int</span> total = <span class="nu">0</span>;
        <span class="kw">for</span> (<span class="kw">int</span> i = <span class="nu">0</span>; i < numDice; i++) {
            total += random.nextInt(<span class="nu">6</span>) + <span class="nu">1</span>;
        }
        <span class="kw">return</span> total;
    }
}

<span class="kw">class</span> <span class="tp">Board</span> {
    <span class="kw">private int</span> size;
    <span class="kw">private</span> Map&lt;Integer, Jump&gt; snakesAndLadders;

    <span class="tp">Board</span>(<span class="kw">int</span> size, List&lt;Jump&gt; snakes, List&lt;Jump&gt; ladders) {
        <span class="kw">this</span>.size = size;
        <span class="kw">this</span>.snakesAndLadders = <span class="kw">new</span> HashMap&lt;&gt;();
        <span class="kw">for</span> (Jump s : snakes)  snakesAndLadders.put(s.start, s);
        <span class="kw">for</span> (Jump l : ladders) snakesAndLadders.put(l.start, l);
    }

    <span class="kw">public int</span> <span class="fn">getFinalPosition</span>(<span class="kw">int</span> pos) {
        <span class="kw">if</span> (snakesAndLadders.containsKey(pos)) {
            Jump j = snakesAndLadders.get(pos);
            System.out.println((j.end > j.start ? <span class="st">"ü™ú Ladder!"</span> : <span class="st">"üêç Snake!"</span>)
                + <span class="st">" "</span> + j.start + <span class="st">" ‚Üí "</span> + j.end);
            <span class="kw">return</span> j.end;
        }
        <span class="kw">return</span> pos;
    }

    <span class="kw">public int</span> <span class="fn">getSize</span>() { <span class="kw">return</span> size; }
}

<span class="cm">// ===== GAME =====</span>
<span class="kw">class</span> <span class="tp">SnakeAndLadderGame</span> {
    <span class="kw">private</span> Board board;
    <span class="kw">private</span> Dice dice;
    <span class="kw">private</span> Queue&lt;Player&gt; players;

    <span class="tp">SnakeAndLadderGame</span>(Board board, Dice dice, List&lt;Player&gt; playerList) {
        <span class="kw">this</span>.board = board;
        <span class="kw">this</span>.dice = dice;
        <span class="kw">this</span>.players = <span class="kw">new</span> LinkedList&lt;&gt;(playerList);
    }

    <span class="kw">public</span> Player <span class="fn">play</span>() {
        <span class="kw">while</span> (<span class="kw">true</span>) {
            Player current = players.poll();
            <span class="kw">int</span> roll = dice.<span class="fn">roll</span>();
            <span class="kw">int</span> newPos = current.<span class="fn">getPosition</span>() + roll;

            <span class="kw">if</span> (newPos > board.<span class="fn">getSize</span>()) {
                players.add(current); <span class="cm">// skip turn</span>
                <span class="kw">continue</span>;
            }

            newPos = board.<span class="fn">getFinalPosition</span>(newPos);
            current.<span class="fn">setPosition</span>(newPos);

            System.out.println(current.<span class="fn">getName</span>() + <span class="st">" rolled "</span> + roll
                + <span class="st">" ‚Üí position "</span> + newPos);

            <span class="kw">if</span> (newPos == board.<span class="fn">getSize</span>()) {
                System.out.println(current.<span class="fn">getName</span>() + <span class="st">" WINS! üéâ"</span>);
                <span class="kw">return</span> current;
            }
            players.add(current);
        }
    }
}</code></pre>
`
            },
            {
                title: "5. Vending Machine ‚òÖ‚òÖ‚òÖ‚òÖ",
                content: `
<h3>ü•§ Design a Vending Machine</h3>
<div class="callout important"><div class="callout-title">Classic State Pattern Problem ‚Äî Amazon, Oracle</div></div>

<pre><code><span class="cm">// ===== ENUMS =====</span>
<span class="kw">enum</span> <span class="tp">Coin</span> { PENNY(<span class="nu">1</span>), NICKEL(<span class="nu">5</span>), DIME(<span class="nu">10</span>), QUARTER(<span class="nu">25</span>);
    <span class="kw">int</span> value; <span class="tp">Coin</span>(<span class="kw">int</span> v) { <span class="kw">this</span>.value = v; }
}

<span class="kw">class</span> <span class="tp">Product</span> {
    <span class="kw">private</span> String name;
    <span class="kw">private int</span> price;
    <span class="tp">Product</span>(String n, <span class="kw">int</span> p) { <span class="kw">this</span>.name = n; <span class="kw">this</span>.price = p; }
    <span class="kw">public</span> String <span class="fn">getName</span>() { <span class="kw">return</span> name; }
    <span class="kw">public int</span> <span class="fn">getPrice</span>() { <span class="kw">return</span> price; }
}

<span class="cm">// ===== STATE INTERFACE =====</span>
<span class="kw">interface</span> <span class="tp">VendingState</span> {
    <span class="kw">void</span> <span class="fn">insertCoin</span>(VendingMachine vm, Coin coin);
    <span class="kw">void</span> <span class="fn">selectProduct</span>(VendingMachine vm, String code);
    <span class="kw">void</span> <span class="fn">dispense</span>(VendingMachine vm);
    <span class="kw">void</span> <span class="fn">cancel</span>(VendingMachine vm);
}

<span class="cm">// ===== IDLE STATE =====</span>
<span class="kw">class</span> <span class="tp">IdleState</span> <span class="kw">implements</span> <span class="tp">VendingState</span> {
    <span class="kw">public void</span> <span class="fn">insertCoin</span>(VendingMachine vm, Coin coin) {
        vm.addBalance(coin.value);
        System.out.println(<span class="st">"Inserted: "</span> + coin + <span class="st">". Balance: "</span> + vm.getBalance());
        vm.<span class="fn">setState</span>(<span class="kw">new</span> HasMoneyState());
    }
    <span class="kw">public void</span> <span class="fn">selectProduct</span>(VendingMachine vm, String code) {
        System.out.println(<span class="st">"Insert coin first!"</span>);
    }
    <span class="kw">public void</span> <span class="fn">dispense</span>(VendingMachine vm) { System.out.println(<span class="st">"Insert coin first!"</span>); }
    <span class="kw">public void</span> <span class="fn">cancel</span>(VendingMachine vm)   { System.out.println(<span class="st">"Nothing to cancel"</span>); }
}

<span class="cm">// ===== HAS MONEY STATE =====</span>
<span class="kw">class</span> <span class="tp">HasMoneyState</span> <span class="kw">implements</span> <span class="tp">VendingState</span> {
    <span class="kw">public void</span> <span class="fn">insertCoin</span>(VendingMachine vm, Coin coin) {
        vm.addBalance(coin.value);
        System.out.println(<span class="st">"Balance: "</span> + vm.getBalance());
    }
    <span class="kw">public void</span> <span class="fn">selectProduct</span>(VendingMachine vm, String code) {
        Product p = vm.getProduct(code);
        <span class="kw">if</span> (p == <span class="kw">null</span>) { System.out.println(<span class="st">"Invalid product!"</span>); <span class="kw">return</span>; }
        <span class="kw">if</span> (vm.getBalance() < p.<span class="fn">getPrice</span>()) {
            System.out.println(<span class="st">"Need "</span> + (p.<span class="fn">getPrice</span>() - vm.getBalance()) + <span class="st">" more"</span>);
            <span class="kw">return</span>;
        }
        vm.setSelectedProduct(p);
        vm.<span class="fn">setState</span>(<span class="kw">new</span> DispensingState());
        vm.getState().<span class="fn">dispense</span>(vm);
    }
    <span class="kw">public void</span> <span class="fn">dispense</span>(VendingMachine vm) { System.out.println(<span class="st">"Select product first"</span>); }
    <span class="kw">public void</span> <span class="fn">cancel</span>(VendingMachine vm) {
        System.out.println(<span class="st">"Returning: "</span> + vm.getBalance());
        vm.resetBalance();
        vm.<span class="fn">setState</span>(<span class="kw">new</span> IdleState());
    }
}

<span class="cm">// ===== DISPENSING STATE =====</span>
<span class="kw">class</span> <span class="tp">DispensingState</span> <span class="kw">implements</span> <span class="tp">VendingState</span> {
    <span class="kw">public void</span> <span class="fn">insertCoin</span>(VendingMachine vm, Coin c) { System.out.println(<span class="st">"Wait..."</span>); }
    <span class="kw">public void</span> <span class="fn">selectProduct</span>(VendingMachine vm, String c) { System.out.println(<span class="st">"Wait..."</span>); }
    <span class="kw">public void</span> <span class="fn">dispense</span>(VendingMachine vm) {
        Product p = vm.getSelectedProduct();
        <span class="kw">int</span> change = vm.getBalance() - p.<span class="fn">getPrice</span>();
        System.out.println(<span class="st">"Dispensing: "</span> + p.<span class="fn">getName</span>());
        <span class="kw">if</span> (change > <span class="nu">0</span>) System.out.println(<span class="st">"Change: "</span> + change);
        vm.resetBalance();
        vm.setSelectedProduct(<span class="kw">null</span>);
        vm.<span class="fn">setState</span>(<span class="kw">new</span> IdleState());
    }
    <span class="kw">public void</span> <span class="fn">cancel</span>(VendingMachine vm) { System.out.println(<span class="st">"Already dispensing!"</span>); }
}

<span class="cm">// ===== VENDING MACHINE =====</span>
<span class="kw">class</span> <span class="tp">VendingMachine</span> {
    <span class="kw">private</span> VendingState state;
    <span class="kw">private int</span> balance;
    <span class="kw">private</span> Map&lt;String, Product&gt; inventory;
    <span class="kw">private</span> Product selectedProduct;

    <span class="tp">VendingMachine</span>() {
        <span class="kw">this</span>.state = <span class="kw">new</span> IdleState();
        <span class="kw">this</span>.balance = <span class="nu">0</span>;
        <span class="kw">this</span>.inventory = <span class="kw">new</span> HashMap&lt;&gt;();
    }

    <span class="kw">public void</span> <span class="fn">addProduct</span>(String code, Product p) { inventory.put(code, p); }
    <span class="kw">public void</span> <span class="fn">setState</span>(VendingState s) { <span class="kw">this</span>.state = s; }
    <span class="kw">public</span> VendingState <span class="fn">getState</span>() { <span class="kw">return</span> state; }
    <span class="kw">public void</span> <span class="fn">addBalance</span>(<span class="kw">int</span> amount) { balance += amount; }
    <span class="kw">public int</span> <span class="fn">getBalance</span>() { <span class="kw">return</span> balance; }
    <span class="kw">public void</span> <span class="fn">resetBalance</span>() { balance = <span class="nu">0</span>; }
    <span class="kw">public</span> Product <span class="fn">getProduct</span>(String code) { <span class="kw">return</span> inventory.get(code); }
    <span class="kw">public void</span> <span class="fn">setSelectedProduct</span>(Product p) { selectedProduct = p; }
    <span class="kw">public</span> Product <span class="fn">getSelectedProduct</span>() { <span class="kw">return</span> selectedProduct; }

    <span class="cm">// Delegate to current state</span>
    <span class="kw">public void</span> <span class="fn">insertCoin</span>(Coin c)      { state.<span class="fn">insertCoin</span>(<span class="kw">this</span>, c); }
    <span class="kw">public void</span> <span class="fn">selectProduct</span>(String c) { state.<span class="fn">selectProduct</span>(<span class="kw">this</span>, c); }
    <span class="kw">public void</span> <span class="fn">cancel</span>()               { state.<span class="fn">cancel</span>(<span class="kw">this</span>); }
}</code></pre>
`
            }
        ,
{
        title: "6. BookMyShow ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üé¨ Design BookMyShow (Movie Ticket Booking)</h3>
<div class="callout important"><div class="callout-title">Top 5 Asked ‚Äî Amazon, Flipkart, Paytm, BookMyShow</div></div>

<h4>Requirements</h4>
<ul><li>Search movies by city</li><li>View shows (theatre, timing, available seats)</li><li>Book seats (with seat selection)</li><li>Concurrency: two users can't book same seat</li><li>Payment processing</li></ul>

<pre><code><span class="kw">enum</span> <span class="tp">SeatType</span>     { REGULAR, PREMIUM, VIP }
<span class="kw">enum</span> <span class="tp">BookingStatus</span> { CONFIRMED, CANCELLED, PENDING }
<span class="kw">enum</span> <span class="tp">SeatStatus</span>    { AVAILABLE, BOOKED, LOCKED }

<span class="kw">class</span> <span class="tp">Movie</span> {
    <span class="kw">private</span> String id, title, genre;
    <span class="kw">private int</span> durationMinutes;
    <span class="cm">// constructor + getters</span>
}

<span class="kw">class</span> <span class="tp">Seat</span> {
    <span class="kw">private</span> String seatId;
    <span class="kw">private int</span> row, col;
    <span class="kw">private</span> SeatType type;
    <span class="kw">private</span> SeatStatus status;
    <span class="kw">private double</span> price;

    <span class="kw">public synchronized boolean</span> <span class="fn">lock</span>() {
        <span class="kw">if</span> (status == SeatStatus.AVAILABLE) {
            status = SeatStatus.LOCKED;
            <span class="kw">return true</span>;
        }
        <span class="kw">return false</span>;
    }

    <span class="kw">public void</span> <span class="fn">book</span>()    { status = SeatStatus.BOOKED; }
    <span class="kw">public void</span> <span class="fn">release</span>() { status = SeatStatus.AVAILABLE; }
}

<span class="kw">class</span> <span class="tp">Show</span> {
    <span class="kw">private</span> Movie movie;
    <span class="kw">private</span> String theatreId;
    <span class="kw">private</span> LocalDateTime startTime;
    <span class="kw">private</span> List&lt;Seat&gt; seats;

    <span class="kw">public</span> List&lt;Seat&gt; <span class="fn">getAvailableSeats</span>() {
        <span class="kw">return</span> seats.stream()
            .filter(s -> s.getStatus() == SeatStatus.AVAILABLE)
            .collect(Collectors.toList());
    }
}

<span class="kw">class</span> <span class="tp">Booking</span> {
    <span class="kw">private</span> String bookingId;
    <span class="kw">private</span> Show show;
    <span class="kw">private</span> List&lt;Seat&gt; seats;
    <span class="kw">private</span> String userId;
    <span class="kw">private double</span> totalAmount;
    <span class="kw">private</span> BookingStatus status;

    <span class="tp">Booking</span>(Show show, List&lt;Seat&gt; seats, String userId) {
        <span class="kw">this</span>.bookingId = UUID.randomUUID().toString();
        <span class="kw">this</span>.show = show;
        <span class="kw">this</span>.seats = seats;
        <span class="kw">this</span>.userId = userId;
        <span class="kw">this</span>.totalAmount = seats.stream().mapToDouble(Seat::getPrice).sum();
        <span class="kw">this</span>.status = BookingStatus.PENDING;
    }

    <span class="kw">public void</span> <span class="fn">confirm</span>() {
        seats.forEach(Seat::book);
        status = BookingStatus.CONFIRMED;
    }

    <span class="kw">public void</span> <span class="fn">cancel</span>() {
        seats.forEach(Seat::release);
        status = BookingStatus.CANCELLED;
    }
}

<span class="cm">// ===== BOOKING SERVICE =====</span>
<span class="kw">class</span> <span class="tp">BookingService</span> {
    <span class="kw">public</span> Booking <span class="fn">bookSeats</span>(Show show, List&lt;Seat&gt; seats, String userId) {
        <span class="cm">// Step 1: Lock all requested seats</span>
        List&lt;Seat&gt; locked = <span class="kw">new</span> ArrayList&lt;&gt;();
        <span class="kw">for</span> (Seat seat : seats) {
            <span class="kw">if</span> (seat.<span class="fn">lock</span>()) {
                locked.add(seat);
            } <span class="kw">else</span> {
                <span class="cm">// Release already locked seats</span>
                locked.forEach(Seat::release);
                <span class="kw">throw new</span> RuntimeException(<span class="st">"Seat "</span> + seat.getSeatId() + <span class="st">" not available"</span>);
            }
        }
        <span class="cm">// Step 2: Create booking</span>
        Booking booking = <span class="kw">new</span> Booking(show, locked, userId);
        <span class="cm">// Step 3: Process payment (simplified)</span>
        booking.<span class="fn">confirm</span>();
        <span class="kw">return</span> booking;
    }
}</code></pre>

<div class="callout interview"><div class="callout-title">üéØ Key Design Points</div>
<p>‚Ä¢ <strong>synchronized lock()</strong> on Seat handles concurrency<br>
‚Ä¢ Lock ‚Üí Pay ‚Üí Book pattern prevents double booking<br>
‚Ä¢ If payment fails, release locked seats<br>
‚Ä¢ Patterns: <strong>Builder</strong> for Booking, <strong>Strategy</strong> for Payment</p></div>
`
    },
    {
        title: "7. Splitwise ‚òÖ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üí∞ Design Splitwise (Expense Sharing)</h3>

<pre><code><span class="kw">enum</span> <span class="tp">SplitType</span> { EQUAL, EXACT, PERCENTAGE }

<span class="kw">class</span> <span class="tp">User</span> {
    <span class="kw">private</span> String id, name, email;
    <span class="kw">private</span> Map&lt;String, Double&gt; balances; <span class="cm">// userId ‚Üí amount owed</span>

    <span class="tp">User</span>(String id, String name) {
        <span class="kw">this</span>.id = id; <span class="kw">this</span>.name = name;
        <span class="kw">this</span>.balances = <span class="kw">new</span> HashMap&lt;&gt;();
    }

    <span class="kw">public void</span> <span class="fn">updateBalance</span>(String userId, <span class="kw">double</span> amount) {
        balances.merge(userId, amount, Double::sum);
    }
}

<span class="cm">// ===== SPLIT STRATEGIES (Strategy Pattern) =====</span>
<span class="kw">interface</span> <span class="tp">SplitStrategy</span> {
    Map&lt;User, Double&gt; <span class="fn">split</span>(<span class="kw">double</span> amount, List&lt;User&gt; users, List&lt;Double&gt; values);
}

<span class="kw">class</span> <span class="tp">EqualSplit</span> <span class="kw">implements</span> <span class="tp">SplitStrategy</span> {
    <span class="kw">public</span> Map&lt;User, Double&gt; <span class="fn">split</span>(<span class="kw">double</span> amount, List&lt;User&gt; users, List&lt;Double&gt; v) {
        Map&lt;User, Double&gt; shares = <span class="kw">new</span> HashMap&lt;&gt;();
        <span class="kw">double</span> each = amount / users.size();
        users.forEach(u -> shares.put(u, each));
        <span class="kw">return</span> shares;
    }
}

<span class="kw">class</span> <span class="tp">ExactSplit</span> <span class="kw">implements</span> <span class="tp">SplitStrategy</span> {
    <span class="kw">public</span> Map&lt;User, Double&gt; <span class="fn">split</span>(<span class="kw">double</span> amount, List&lt;User&gt; users, List&lt;Double&gt; vals) {
        Map&lt;User, Double&gt; shares = <span class="kw">new</span> HashMap&lt;&gt;();
        <span class="kw">for</span> (<span class="kw">int</span> i = <span class="nu">0</span>; i < users.size(); i++) shares.put(users.get(i), vals.get(i));
        <span class="kw">return</span> shares;
    }
}

<span class="cm">// ===== EXPENSE =====</span>
<span class="kw">class</span> <span class="tp">Expense</span> {
    <span class="kw">private</span> String id;
    <span class="kw">private double</span> amount;
    <span class="kw">private</span> User paidBy;
    <span class="kw">private</span> List&lt;User&gt; splitAmong;
    <span class="kw">private</span> SplitStrategy strategy;

    <span class="tp">Expense</span>(User paidBy, <span class="kw">double</span> amount, List&lt;User&gt; users, SplitStrategy strategy) {
        <span class="kw">this</span>.id = UUID.randomUUID().toString();
        <span class="kw">this</span>.paidBy = paidBy;
        <span class="kw">this</span>.amount = amount;
        <span class="kw">this</span>.splitAmong = users;
        <span class="kw">this</span>.strategy = strategy;
    }

    <span class="kw">public void</span> <span class="fn">settle</span>() {
        Map&lt;User, Double&gt; shares = strategy.<span class="fn">split</span>(amount, splitAmong, <span class="kw">null</span>);
        <span class="kw">for</span> (Map.Entry&lt;User, Double&gt; e : shares.entrySet()) {
            User user = e.getKey();
            <span class="kw">double</span> owed = e.getValue();
            <span class="kw">if</span> (user != paidBy) {
                user.<span class="fn">updateBalance</span>(paidBy.getId(), owed);     <span class="cm">// user owes paidBy</span>
                paidBy.<span class="fn">updateBalance</span>(user.getId(), -owed);   <span class="cm">// paidBy is owed</span>
            }
        }
    }
}

<span class="cm">// ===== EXPENSE MANAGER =====</span>
<span class="kw">class</span> <span class="tp">ExpenseManager</span> {
    <span class="kw">private</span> Map&lt;String, User&gt; users = <span class="kw">new</span> HashMap&lt;&gt;();
    <span class="kw">private</span> List&lt;Expense&gt; expenses = <span class="kw">new</span> ArrayList&lt;&gt;();

    <span class="kw">public void</span> <span class="fn">addExpense</span>(Expense expense) {
        expenses.add(expense);
        expense.<span class="fn">settle</span>();
    }

    <span class="kw">public void</span> <span class="fn">showBalances</span>(User user) {
        user.getBalances().forEach((uid, amount) -> {
            <span class="kw">if</span> (amount > <span class="nu">0</span>) System.out.println(user.getName() + <span class="st">" owes "</span> + uid + <span class="st">": "</span> + amount);
            <span class="kw">else if</span> (amount < <span class="nu">0</span>) System.out.println(uid + <span class="st">" owes "</span> + user.getName() + <span class="st">": "</span> + (-amount));
        });
    }
}</code></pre>
`
    },
    {
        title: "8. Library Management ‚òÖ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üìö Design a Library Management System</h3>

<pre><code><span class="kw">enum</span> <span class="tp">BookStatus</span> { AVAILABLE, BORROWED, RESERVED, LOST }

<span class="kw">class</span> <span class="tp">Book</span> {
    <span class="kw">private</span> String isbn, title, author;
    <span class="kw">private</span> BookStatus status;

    <span class="tp">Book</span>(String isbn, String title, String author) {
        <span class="kw">this</span>.isbn = isbn; <span class="kw">this</span>.title = title; <span class="kw">this</span>.author = author;
        <span class="kw">this</span>.status = BookStatus.AVAILABLE;
    }
    <span class="cm">// getters + setters</span>
}

<span class="kw">class</span> <span class="tp">Member</span> {
    <span class="kw">private</span> String id, name;
    <span class="kw">private</span> List&lt;BookLoan&gt; activeLoans;
    <span class="kw">private static final int</span> MAX_BOOKS = <span class="nu">5</span>;

    <span class="kw">public boolean</span> <span class="fn">canBorrow</span>() { <span class="kw">return</span> activeLoans.size() < MAX_BOOKS; }
}

<span class="kw">class</span> <span class="tp">BookLoan</span> {
    <span class="kw">private</span> Book book;
    <span class="kw">private</span> Member member;
    <span class="kw">private</span> LocalDate borrowDate, dueDate, returnDate;
    <span class="kw">private double</span> fine;

    <span class="tp">BookLoan</span>(Book book, Member member) {
        <span class="kw">this</span>.book = book;
        <span class="kw">this</span>.member = member;
        <span class="kw">this</span>.borrowDate = LocalDate.now();
        <span class="kw">this</span>.dueDate = borrowDate.plusDays(<span class="nu">14</span>);
    }

    <span class="kw">public double</span> <span class="fn">calculateFine</span>() {
        <span class="kw">if</span> (returnDate != <span class="kw">null</span> && returnDate.isAfter(dueDate)) {
            <span class="kw">long</span> daysLate = ChronoUnit.DAYS.between(dueDate, returnDate);
            <span class="kw">return</span> daysLate * <span class="nu">2.0</span>; <span class="cm">// $2 per day late</span>
        }
        <span class="kw">return</span> <span class="nu">0</span>;
    }
}

<span class="cm">// ===== LIBRARY SERVICE =====</span>
<span class="kw">class</span> <span class="tp">LibraryService</span> {
    <span class="kw">private</span> Map&lt;String, Book&gt; catalog = <span class="kw">new</span> HashMap&lt;&gt;();
    <span class="kw">private</span> List&lt;BookLoan&gt; loans = <span class="kw">new</span> ArrayList&lt;&gt;();

    <span class="kw">public</span> BookLoan <span class="fn">borrowBook</span>(String isbn, Member member) {
        Book book = catalog.get(isbn);
        <span class="kw">if</span> (book == <span class="kw">null</span> || book.getStatus() != BookStatus.AVAILABLE) {
            <span class="kw">throw new</span> RuntimeException(<span class="st">"Book not available"</span>);
        }
        <span class="kw">if</span> (!member.<span class="fn">canBorrow</span>()) {
            <span class="kw">throw new</span> RuntimeException(<span class="st">"Borrow limit reached"</span>);
        }
        book.setStatus(BookStatus.BORROWED);
        BookLoan loan = <span class="kw">new</span> BookLoan(book, member);
        loans.add(loan);
        <span class="kw">return</span> loan;
    }

    <span class="kw">public double</span> <span class="fn">returnBook</span>(BookLoan loan) {
        loan.setReturnDate(LocalDate.now());
        loan.getBook().setStatus(BookStatus.AVAILABLE);
        <span class="kw">return</span> loan.<span class="fn">calculateFine</span>();
    }

    <span class="kw">public</span> List&lt;Book&gt; <span class="fn">searchByTitle</span>(String keyword) {
        <span class="kw">return</span> catalog.values().stream()
            .filter(b -> b.getTitle().toLowerCase().contains(keyword.toLowerCase()))
            .collect(Collectors.toList());
    }
}</code></pre>
`
    },
    {
        title: "9. ATM System ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üèß Design an ATM System</h3>

<pre><code><span class="kw">enum</span> <span class="tp">TransactionType</span> { WITHDRAWAL, DEPOSIT, BALANCE_CHECK }

<span class="kw">class</span> <span class="tp">Account</span> {
    <span class="kw">private</span> String accountId;
    <span class="kw">private double</span> balance;
    <span class="kw">private</span> String pin;

    <span class="kw">public boolean</span> <span class="fn">validatePin</span>(String inputPin) { <span class="kw">return</span> pin.equals(inputPin); }

    <span class="kw">public synchronized boolean</span> <span class="fn">withdraw</span>(<span class="kw">double</span> amount) {
        <span class="kw">if</span> (amount > <span class="nu">0</span> && amount <= balance) {
            balance -= amount;
            <span class="kw">return true</span>;
        }
        <span class="kw">return false</span>;
    }

    <span class="kw">public synchronized void</span> <span class="fn">deposit</span>(<span class="kw">double</span> amount) {
        <span class="kw">if</span> (amount > <span class="nu">0</span>) balance += amount;
    }
}

<span class="cm">// ===== CASH DISPENSER (Chain of Responsibility) =====</span>
<span class="kw">abstract class</span> <span class="tp">CashDispenser</span> {
    <span class="kw">protected int</span> denomination;
    <span class="kw">protected int</span> count;
    <span class="kw">protected</span> CashDispenser next;

    <span class="kw">public void</span> <span class="fn">setNext</span>(CashDispenser next) { <span class="kw">this</span>.next = next; }

    <span class="kw">public void</span> <span class="fn">dispense</span>(<span class="kw">int</span> amount) {
        <span class="kw">int</span> notes = Math.min(amount / denomination, count);
        <span class="kw">int</span> remaining = amount - notes * denomination;
        <span class="kw">if</span> (notes > <span class="nu">0</span>) {
            count -= notes;
            System.out.println(notes + <span class="st">" x $"</span> + denomination);
        }
        <span class="kw">if</span> (remaining > <span class="nu">0</span> && next != <span class="kw">null</span>) next.<span class="fn">dispense</span>(remaining);
    }
}

<span class="kw">class</span> <span class="tp">Hundred</span> <span class="kw">extends</span> <span class="tp">CashDispenser</span> { <span class="tp">Hundred</span>(<span class="kw">int</span> c) { denomination=<span class="nu">100</span>; count=c; } }
<span class="kw">class</span> <span class="tp">Fifty</span> <span class="kw">extends</span> <span class="tp">CashDispenser</span>   { <span class="tp">Fifty</span>(<span class="kw">int</span> c)   { denomination=<span class="nu">50</span>;  count=c; } }
<span class="kw">class</span> <span class="tp">Twenty</span> <span class="kw">extends</span> <span class="tp">CashDispenser</span>  { <span class="tp">Twenty</span>(<span class="kw">int</span> c)  { denomination=<span class="nu">20</span>;  count=c; } }

<span class="cm">// ===== ATM =====</span>
<span class="kw">class</span> <span class="tp">ATM</span> {
    <span class="kw">private</span> CashDispenser dispenserChain;
    <span class="kw">private</span> Map&lt;String, Account&gt; accounts;
    <span class="kw">private</span> Account currentAccount;

    <span class="tp">ATM</span>() {
        <span class="cm">// Build chain: $100 ‚Üí $50 ‚Üí $20</span>
        Hundred h = <span class="kw">new</span> Hundred(<span class="nu">100</span>);
        Fifty f = <span class="kw">new</span> Fifty(<span class="nu">100</span>);
        Twenty t = <span class="kw">new</span> Twenty(<span class="nu">100</span>);
        h.<span class="fn">setNext</span>(f); f.<span class="fn">setNext</span>(t);
        dispenserChain = h;
    }

    <span class="kw">public boolean</span> <span class="fn">authenticate</span>(String cardId, String pin) {
        Account acc = accounts.get(cardId);
        <span class="kw">if</span> (acc != <span class="kw">null</span> && acc.<span class="fn">validatePin</span>(pin)) {
            currentAccount = acc;
            <span class="kw">return true</span>;
        }
        <span class="kw">return false</span>;
    }

    <span class="kw">public boolean</span> <span class="fn">withdraw</span>(<span class="kw">double</span> amount) {
        <span class="kw">if</span> (currentAccount.<span class="fn">withdraw</span>(amount)) {
            dispenserChain.<span class="fn">dispense</span>((<span class="kw">int</span>) amount);
            <span class="kw">return true</span>;
        }
        <span class="kw">return false</span>;
    }
}</code></pre>

<div class="callout tip"><div class="callout-title">Bonus Pattern: Chain of Responsibility</div>
<p>The cash dispenser uses Chain of Responsibility ‚Äî $100 bills first, then $50, then $20. Each handler tries to process as much as it can, then passes the remainder.</p></div>
`
    },
    {
        title: "10. Chess Game ‚òÖ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>‚ôüÔ∏è Design a Chess Game</h3>

<pre><code><span class="kw">enum</span> <span class="tp">Color</span>     { WHITE, BLACK }
<span class="kw">enum</span> <span class="tp">GameState</span> { ACTIVE, CHECK, CHECKMATE, STALEMATE }

<span class="kw">class</span> <span class="tp">Position</span> {
    <span class="kw">int</span> row, col;
    <span class="tp">Position</span>(<span class="kw">int</span> r, <span class="kw">int</span> c) { <span class="kw">this</span>.row = r; <span class="kw">this</span>.col = c; }
}

<span class="cm">// ===== PIECE (Abstract with Polymorphism) =====</span>
<span class="kw">abstract class</span> <span class="tp">Piece</span> {
    <span class="kw">protected</span> Color color;
    <span class="kw">protected</span> Position position;

    <span class="tp">Piece</span>(Color c, Position p) { <span class="kw">this</span>.color = c; <span class="kw">this</span>.position = p; }

    <span class="kw">abstract</span> List&lt;Position&gt; <span class="fn">getValidMoves</span>(Board board);
    <span class="kw">abstract</span> String <span class="fn">getSymbol</span>();
}

<span class="kw">class</span> <span class="tp">Pawn</span> <span class="kw">extends</span> <span class="tp">Piece</span> {
    <span class="tp">Pawn</span>(Color c, Position p) { <span class="kw">super</span>(c, p); }
    <span class="kw">public</span> String <span class="fn">getSymbol</span>() { <span class="kw">return</span> color == Color.WHITE ? <span class="st">"‚ôô"</span> : <span class="st">"‚ôü"</span>; }
    <span class="kw">public</span> List&lt;Position&gt; <span class="fn">getValidMoves</span>(Board board) {
        List&lt;Position&gt; moves = <span class="kw">new</span> ArrayList&lt;&gt;();
        <span class="kw">int</span> dir = color == Color.WHITE ? -<span class="nu">1</span> : <span class="nu">1</span>;
        <span class="cm">// Forward move</span>
        Position fwd = <span class="kw">new</span> Position(position.row + dir, position.col);
        <span class="kw">if</span> (board.<span class="fn">isValid</span>(fwd) && board.<span class="fn">isEmpty</span>(fwd)) moves.add(fwd);
        <span class="cm">// Diagonal captures</span>
        <span class="kw">for</span> (<span class="kw">int</span> dc : <span class="kw">new int</span>[]{-<span class="nu">1</span>, <span class="nu">1</span>}) {
            Position diag = <span class="kw">new</span> Position(position.row + dir, position.col + dc);
            <span class="kw">if</span> (board.<span class="fn">isValid</span>(diag) && board.<span class="fn">hasEnemy</span>(diag, color)) moves.add(diag);
        }
        <span class="kw">return</span> moves;
    }
}

<span class="kw">class</span> <span class="tp">Rook</span> <span class="kw">extends</span> <span class="tp">Piece</span> {
    <span class="tp">Rook</span>(Color c, Position p) { <span class="kw">super</span>(c, p); }
    <span class="kw">public</span> String <span class="fn">getSymbol</span>() { <span class="kw">return</span> color == Color.WHITE ? <span class="st">"‚ôñ"</span> : <span class="st">"‚ôú"</span>; }
    <span class="kw">public</span> List&lt;Position&gt; <span class="fn">getValidMoves</span>(Board board) {
        <span class="cm">// Move in straight lines: up, down, left, right</span>
        <span class="kw">return</span> board.<span class="fn">getLineMoves</span>(position, <span class="kw">new int</span>[][]{{<span class="nu">1</span>,<span class="nu">0</span>},{-<span class="nu">1</span>,<span class="nu">0</span>},{<span class="nu">0</span>,<span class="nu">1</span>},{<span class="nu">0</span>,-<span class="nu">1</span>}}, color);
    }
}
<span class="cm">// Knight, Bishop, Queen, King follow same pattern...</span>

<span class="cm">// ===== BOARD =====</span>
<span class="kw">class</span> <span class="tp">Board</span> {
    <span class="kw">private</span> Piece[][] grid = <span class="kw">new</span> Piece[<span class="nu">8</span>][<span class="nu">8</span>];

    <span class="kw">public boolean</span> <span class="fn">movePiece</span>(Position from, Position to) {
        Piece piece = grid[from.row][from.col];
        List&lt;Position&gt; valid = piece.<span class="fn">getValidMoves</span>(<span class="kw">this</span>);
        <span class="cm">// Check if 'to' is in valid moves</span>
        <span class="cm">// Execute move, handle captures</span>
        grid[to.row][to.col] = piece;
        grid[from.row][from.col] = <span class="kw">null</span>;
        piece.position = to;
        <span class="kw">return true</span>;
    }
}

<span class="cm">// ===== GAME =====</span>
<span class="kw">class</span> <span class="tp">ChessGame</span> {
    <span class="kw">private</span> Board board;
    <span class="kw">private</span> Player whitePlayer, blackPlayer;
    <span class="kw">private</span> Color currentTurn;
    <span class="kw">private</span> GameState state;
    <span class="kw">private</span> List&lt;Move&gt; moveHistory;

    <span class="kw">public</span> GameState <span class="fn">makeMove</span>(Position from, Position to) {
        Piece piece = board.getPiece(from);
        <span class="kw">if</span> (piece.color != currentTurn) <span class="kw">throw new</span> IllegalArgumentException(<span class="st">"Not your turn!"</span>);
        board.<span class="fn">movePiece</span>(from, to);
        currentTurn = (currentTurn == Color.WHITE) ? Color.BLACK : Color.WHITE;
        <span class="cm">// Check for check/checkmate</span>
        <span class="kw">return</span> state;
    }
}</code></pre>

<div class="callout interview"><div class="callout-title">üéØ Key Pattern: Polymorphism</div><p>Each Piece type overrides <code>getValidMoves()</code>. The Board doesn't need to know if it's a Rook or Knight ‚Äî it just calls the method. This is polymorphism in action!</p></div>
`
    },
    {
        title: "11. Hotel Booking ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üè® Design Hotel Booking System</h3>

<pre><code><span class="kw">enum</span> <span class="tp">RoomType</span>      { SINGLE, DOUBLE, SUITE }
<span class="kw">enum</span> <span class="tp">RoomStatus</span>    { AVAILABLE, BOOKED, MAINTENANCE }
<span class="kw">enum</span> <span class="tp">ReservationStatus</span> { CONFIRMED, CHECKED_IN, CHECKED_OUT, CANCELLED }

<span class="kw">class</span> <span class="tp">Room</span> {
    <span class="kw">private</span> String roomNumber;
    <span class="kw">private</span> RoomType type;
    <span class="kw">private double</span> pricePerNight;
    <span class="kw">private</span> RoomStatus status;

    <span class="kw">public boolean</span> <span class="fn">isAvailable</span>() { <span class="kw">return</span> status == RoomStatus.AVAILABLE; }
}

<span class="kw">class</span> <span class="tp">Reservation</span> {
    <span class="kw">private</span> String id;
    <span class="kw">private</span> Guest guest;
    <span class="kw">private</span> Room room;
    <span class="kw">private</span> LocalDate checkIn, checkOut;
    <span class="kw">private</span> ReservationStatus status;
    <span class="kw">private double</span> totalCost;

    <span class="tp">Reservation</span>(Guest g, Room r, LocalDate in, LocalDate out) {
        <span class="kw">this</span>.id = UUID.randomUUID().toString();
        <span class="kw">this</span>.guest = g; <span class="kw">this</span>.room = r;
        <span class="kw">this</span>.checkIn = in; <span class="kw">this</span>.checkOut = out;
        <span class="kw">long</span> nights = ChronoUnit.DAYS.between(in, out);
        <span class="kw">this</span>.totalCost = nights * r.getPricePerNight();
        <span class="kw">this</span>.status = ReservationStatus.CONFIRMED;
        r.setStatus(RoomStatus.BOOKED);
    }
}

<span class="kw">class</span> <span class="tp">Hotel</span> {
    <span class="kw">private</span> String name;
    <span class="kw">private</span> List&lt;Room&gt; rooms;
    <span class="kw">private</span> List&lt;Reservation&gt; reservations;

    <span class="kw">public</span> List&lt;Room&gt; <span class="fn">searchAvailable</span>(RoomType type, LocalDate in, LocalDate out) {
        <span class="kw">return</span> rooms.stream()
            .filter(r -> r.getType() == type && r.<span class="fn">isAvailable</span>())
            .collect(Collectors.toList());
    }

    <span class="kw">public</span> Reservation <span class="fn">bookRoom</span>(Guest g, Room r, LocalDate in, LocalDate out) {
        <span class="kw">if</span> (!r.<span class="fn">isAvailable</span>()) <span class="kw">throw new</span> RuntimeException(<span class="st">"Room not available"</span>);
        Reservation res = <span class="kw">new</span> Reservation(g, r, in, out);
        reservations.add(res);
        <span class="kw">return</span> res;
    }
}</code></pre>
`
    },
    {
        title: "12. Amazon Locker ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üì¶ Design Amazon Locker System</h3>

<pre><code><span class="kw">enum</span> <span class="tp">LockerSize</span>   { SMALL, MEDIUM, LARGE }
<span class="kw">enum</span> <span class="tp">LockerStatus</span> { AVAILABLE, OCCUPIED }

<span class="kw">class</span> <span class="tp">Locker</span> {
    <span class="kw">private</span> String id;
    <span class="kw">private</span> LockerSize size;
    <span class="kw">private</span> LockerStatus status;
    <span class="kw">private</span> Package currentPackage;

    <span class="kw">public boolean</span> <span class="fn">canFit</span>(Package pkg) {
        <span class="kw">return</span> status == LockerStatus.AVAILABLE && size.ordinal() >= pkg.getSize().ordinal();
    }

    <span class="kw">public</span> String <span class="fn">storePackage</span>(Package pkg) {
        <span class="kw">this</span>.currentPackage = pkg;
        <span class="kw">this</span>.status = LockerStatus.OCCUPIED;
        String code = generateCode();
        <span class="kw">return</span> code;
    }

    <span class="kw">public</span> Package <span class="fn">retrievePackage</span>(String code) {
        <span class="cm">// Validate code and return package</span>
        Package pkg = currentPackage;
        currentPackage = <span class="kw">null</span>;
        status = LockerStatus.AVAILABLE;
        <span class="kw">return</span> pkg;
    }

    <span class="kw">private</span> String <span class="fn">generateCode</span>() {
        <span class="kw">return</span> String.valueOf((<span class="kw">int</span>)(Math.random() * <span class="nu">900000</span>) + <span class="nu">100000</span>);
    }
}

<span class="kw">class</span> <span class="tp">LockerLocation</span> {
    <span class="kw">private</span> String address;
    <span class="kw">private</span> List&lt;Locker&gt; lockers;

    <span class="kw">public</span> Locker <span class="fn">findAvailableLocker</span>(Package pkg) {
        <span class="kw">return</span> lockers.stream()
            .filter(l -> l.<span class="fn">canFit</span>(pkg))
            .findFirst()
            .orElse(<span class="kw">null</span>);
    }
}

<span class="kw">class</span> <span class="tp">LockerService</span> {
    <span class="kw">private</span> List&lt;LockerLocation&gt; locations;
    <span class="kw">private</span> Map&lt;String, Locker&gt; codeToLocker = <span class="kw">new</span> HashMap&lt;&gt;();

    <span class="kw">public</span> String <span class="fn">assignLocker</span>(Package pkg, String locationId) {
        LockerLocation loc = <span class="fn">findLocation</span>(locationId);
        Locker locker = loc.<span class="fn">findAvailableLocker</span>(pkg);
        <span class="kw">if</span> (locker == <span class="kw">null</span>) <span class="kw">throw new</span> RuntimeException(<span class="st">"No locker available"</span>);
        String code = locker.<span class="fn">storePackage</span>(pkg);
        codeToLocker.put(code, locker);
        <span class="cm">// Send code to customer via email/SMS</span>
        <span class="kw">return</span> code;
    }

    <span class="kw">public</span> Package <span class="fn">pickupPackage</span>(String code) {
        Locker locker = codeToLocker.get(code);
        <span class="kw">if</span> (locker == <span class="kw">null</span>) <span class="kw">throw new</span> RuntimeException(<span class="st">"Invalid code"</span>);
        codeToLocker.remove(code);
        <span class="kw">return</span> locker.<span class="fn">retrievePackage</span>(code);
    }
}</code></pre>
`
    },
    {
        title: "13. Online Shopping ‚òÖ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üõí Design Online Shopping System (Amazon)</h3>

<pre><code><span class="kw">enum</span> <span class="tp">OrderStatus</span> { PLACED, CONFIRMED, SHIPPED, DELIVERED, CANCELLED }

<span class="kw">class</span> <span class="tp">Product</span> {
    <span class="kw">private</span> String id, name, description;
    <span class="kw">private double</span> price;
    <span class="kw">private int</span> stockCount;

    <span class="kw">public synchronized boolean</span> <span class="fn">reduceStock</span>(<span class="kw">int</span> qty) {
        <span class="kw">if</span> (stockCount >= qty) { stockCount -= qty; <span class="kw">return true</span>; }
        <span class="kw">return false</span>;
    }
}

<span class="kw">class</span> <span class="tp">CartItem</span> {
    <span class="kw">private</span> Product product;
    <span class="kw">private int</span> quantity;
    <span class="kw">public double</span> <span class="fn">getSubtotal</span>() { <span class="kw">return</span> product.getPrice() * quantity; }
}

<span class="kw">class</span> <span class="tp">ShoppingCart</span> {
    <span class="kw">private</span> List&lt;CartItem&gt; items = <span class="kw">new</span> ArrayList&lt;&gt;();

    <span class="kw">public void</span> <span class="fn">addItem</span>(Product p, <span class="kw">int</span> qty) {
        items.add(<span class="kw">new</span> CartItem(p, qty));
    }
    <span class="kw">public void</span> <span class="fn">removeItem</span>(Product p) {
        items.removeIf(i -> i.getProduct().equals(p));
    }
    <span class="kw">public double</span> <span class="fn">getTotal</span>() {
        <span class="kw">return</span> items.stream().mapToDouble(CartItem::getSubtotal).sum();
    }
    <span class="kw">public void</span> <span class="fn">clear</span>() { items.clear(); }
}

<span class="kw">class</span> <span class="tp">Order</span> {
    <span class="kw">private</span> String orderId;
    <span class="kw">private</span> User user;
    <span class="kw">private</span> List&lt;CartItem&gt; items;
    <span class="kw">private double</span> totalAmount;
    <span class="kw">private</span> OrderStatus status;
    <span class="kw">private</span> Address shippingAddress;

    <span class="tp">Order</span>(User u, List&lt;CartItem&gt; items, Address addr) {
        <span class="kw">this</span>.orderId = UUID.randomUUID().toString();
        <span class="kw">this</span>.user = u;
        <span class="kw">this</span>.items = <span class="kw">new</span> ArrayList&lt;&gt;(items);
        <span class="kw">this</span>.totalAmount = items.stream().mapToDouble(CartItem::getSubtotal).sum();
        <span class="kw">this</span>.shippingAddress = addr;
        <span class="kw">this</span>.status = OrderStatus.PLACED;
    }
}

<span class="cm">// ===== ORDER SERVICE =====</span>
<span class="kw">class</span> <span class="tp">OrderService</span> {
    <span class="kw">private</span> PaymentMethod paymentMethod; <span class="cm">// Strategy pattern</span>

    <span class="kw">public</span> Order <span class="fn">placeOrder</span>(User user, ShoppingCart cart, Address addr) {
        <span class="cm">// 1. Validate stock</span>
        <span class="kw">for</span> (CartItem item : cart.getItems()) {
            <span class="kw">if</span> (!item.getProduct().<span class="fn">reduceStock</span>(item.getQuantity())) {
                <span class="kw">throw new</span> RuntimeException(item.getProduct().getName() + <span class="st">" out of stock"</span>);
            }
        }
        <span class="cm">// 2. Process payment</span>
        paymentMethod.<span class="fn">pay</span>(cart.<span class="fn">getTotal</span>());
        <span class="cm">// 3. Create order</span>
        Order order = <span class="kw">new</span> Order(user, cart.getItems(), addr);
        cart.<span class="fn">clear</span>();
        <span class="kw">return</span> order;
    }
}</code></pre>
`
    },
    {
        title: "14. Ride Sharing (Uber) ‚òÖ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üöó Design Ride Sharing (Uber/Ola)</h3>

<pre><code><span class="kw">enum</span> <span class="tp">RideStatus</span>  { REQUESTED, MATCHED, IN_PROGRESS, COMPLETED, CANCELLED }
<span class="kw">enum</span> <span class="tp">DriverStatus</span>{ AVAILABLE, ON_RIDE, OFFLINE }

<span class="kw">class</span> <span class="tp">Location</span> {
    <span class="kw">private double</span> lat, lng;
    <span class="kw">public double</span> <span class="fn">distanceTo</span>(Location other) {
        <span class="kw">return</span> Math.sqrt(Math.pow(lat - other.lat, <span class="nu">2</span>) + Math.pow(lng - other.lng, <span class="nu">2</span>));
    }
}

<span class="kw">class</span> <span class="tp">Rider</span> {
    <span class="kw">private</span> String id, name;
    <span class="kw">private</span> Location currentLocation;
}

<span class="kw">class</span> <span class="tp">Driver</span> {
    <span class="kw">private</span> String id, name;
    <span class="kw">private</span> Location currentLocation;
    <span class="kw">private</span> DriverStatus status;
    <span class="kw">private double</span> rating;

    <span class="kw">public boolean</span> <span class="fn">isAvailable</span>() { <span class="kw">return</span> status == DriverStatus.AVAILABLE; }
}

<span class="kw">class</span> <span class="tp">Ride</span> {
    <span class="kw">private</span> String rideId;
    <span class="kw">private</span> Rider rider;
    <span class="kw">private</span> Driver driver;
    <span class="kw">private</span> Location pickup, dropoff;
    <span class="kw">private</span> RideStatus status;
    <span class="kw">private double</span> fare;

    <span class="kw">public void</span> <span class="fn">start</span>() { status = RideStatus.IN_PROGRESS; }
    <span class="kw">public void</span> <span class="fn">complete</span>(<span class="kw">double</span> fare) {
        <span class="kw">this</span>.fare = fare;
        status = RideStatus.COMPLETED;
        driver.setStatus(DriverStatus.AVAILABLE);
    }
}

<span class="cm">// ===== MATCHING STRATEGY (Strategy Pattern) =====</span>
<span class="kw">interface</span> <span class="tp">DriverMatchingStrategy</span> {
    Driver <span class="fn">findDriver</span>(Location pickup, List&lt;Driver&gt; drivers);
}

<span class="kw">class</span> <span class="tp">NearestDriverStrategy</span> <span class="kw">implements</span> <span class="tp">DriverMatchingStrategy</span> {
    <span class="kw">public</span> Driver <span class="fn">findDriver</span>(Location pickup, List&lt;Driver&gt; drivers) {
        <span class="kw">return</span> drivers.stream()
            .filter(Driver::isAvailable)
            .min(Comparator.comparingDouble(d -> d.getCurrentLocation().<span class="fn">distanceTo</span>(pickup)))
            .orElse(<span class="kw">null</span>);
    }
}

<span class="cm">// ===== PRICING STRATEGY =====</span>
<span class="kw">interface</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">double</span> <span class="fn">calculateFare</span>(Location from, Location to);
}

<span class="kw">class</span> <span class="tp">StandardPricing</span> <span class="kw">implements</span> <span class="tp">PricingStrategy</span> {
    <span class="kw">private double</span> baseFare = <span class="nu">50</span>;
    <span class="kw">private double</span> perKmRate = <span class="nu">12</span>;
    <span class="kw">public double</span> <span class="fn">calculateFare</span>(Location from, Location to) {
        <span class="kw">return</span> baseFare + from.<span class="fn">distanceTo</span>(to) * perKmRate;
    }
}

<span class="cm">// ===== RIDE SERVICE =====</span>
<span class="kw">class</span> <span class="tp">RideService</span> {
    <span class="kw">private</span> List&lt;Driver&gt; drivers;
    <span class="kw">private</span> DriverMatchingStrategy matchingStrategy;
    <span class="kw">private</span> PricingStrategy pricingStrategy;

    <span class="kw">public</span> Ride <span class="fn">requestRide</span>(Rider rider, Location pickup, Location dropoff) {
        Driver driver = matchingStrategy.<span class="fn">findDriver</span>(pickup, drivers);
        <span class="kw">if</span> (driver == <span class="kw">null</span>) <span class="kw">throw new</span> RuntimeException(<span class="st">"No drivers available"</span>);

        driver.setStatus(DriverStatus.ON_RIDE);
        Ride ride = <span class="kw">new</span> Ride(rider, driver, pickup, dropoff);
        <span class="cm">// Notify driver (Observer pattern)</span>
        <span class="kw">return</span> ride;
    }

    <span class="kw">public void</span> <span class="fn">completeRide</span>(Ride ride) {
        <span class="kw">double</span> fare = pricingStrategy.<span class="fn">calculateFare</span>(ride.getPickup(), ride.getDropoff());
        ride.<span class="fn">complete</span>(fare);
    }
}</code></pre>
`
    },
    {
        title: "15. Food Ordering (Zomato) ‚òÖ‚òÖ‚òÖ",
        content: `
<h3>üçî Design Food Ordering System (Zomato/Swiggy)</h3>

<pre><code><span class="kw">enum</span> <span class="tp">OrderStatus</span> { PLACED, ACCEPTED, PREPARING, READY, PICKED_UP, DELIVERED }

<span class="kw">class</span> <span class="tp">MenuItem</span> {
    <span class="kw">private</span> String id, name, description;
    <span class="kw">private double</span> price;
    <span class="kw">private boolean</span> isAvailable;
}

<span class="kw">class</span> <span class="tp">Restaurant</span> {
    <span class="kw">private</span> String id, name;
    <span class="kw">private</span> Location location;
    <span class="kw">private</span> List&lt;MenuItem&gt; menu;
    <span class="kw">private boolean</span> isOpen;

    <span class="kw">public</span> List&lt;MenuItem&gt; <span class="fn">getAvailableItems</span>() {
        <span class="kw">return</span> menu.stream().filter(MenuItem::isAvailable).collect(Collectors.toList());
    }
}

<span class="kw">class</span> <span class="tp">OrderItem</span> {
    <span class="kw">private</span> MenuItem item;
    <span class="kw">private int</span> quantity;
    <span class="kw">public double</span> <span class="fn">getSubtotal</span>() { <span class="kw">return</span> item.getPrice() * quantity; }
}

<span class="kw">class</span> <span class="tp">FoodOrder</span> {
    <span class="kw">private</span> String orderId;
    <span class="kw">private</span> Customer customer;
    <span class="kw">private</span> Restaurant restaurant;
    <span class="kw">private</span> List&lt;OrderItem&gt; items;
    <span class="kw">private</span> DeliveryAgent agent;
    <span class="kw">private</span> OrderStatus status;
    <span class="kw">private double</span> total;

    <span class="tp">FoodOrder</span>(Customer c, Restaurant r, List&lt;OrderItem&gt; items) {
        <span class="kw">this</span>.orderId = UUID.randomUUID().toString();
        <span class="kw">this</span>.customer = c;
        <span class="kw">this</span>.restaurant = r;
        <span class="kw">this</span>.items = items;
        <span class="kw">this</span>.total = items.stream().mapToDouble(OrderItem::getSubtotal).sum();
        <span class="kw">this</span>.status = OrderStatus.PLACED;
    }

    <span class="kw">public void</span> <span class="fn">updateStatus</span>(OrderStatus s) { <span class="kw">this</span>.status = s; }
    <span class="kw">public void</span> <span class="fn">assignAgent</span>(DeliveryAgent a) { <span class="kw">this</span>.agent = a; }
}

<span class="kw">class</span> <span class="tp">DeliveryAgent</span> {
    <span class="kw">private</span> String id, name;
    <span class="kw">private</span> Location currentLocation;
    <span class="kw">private boolean</span> isAvailable;
}

<span class="cm">// ===== ORDER SERVICE =====</span>
<span class="kw">class</span> <span class="tp">FoodOrderService</span> {
    <span class="kw">private</span> List&lt;DeliveryAgent&gt; agents;
    <span class="kw">private</span> PaymentMethod paymentMethod;

    <span class="kw">public</span> FoodOrder <span class="fn">placeOrder</span>(Customer c, Restaurant r, List&lt;OrderItem&gt; items) {
        <span class="kw">if</span> (!r.isOpen()) <span class="kw">throw new</span> RuntimeException(<span class="st">"Restaurant closed"</span>);
        FoodOrder order = <span class="kw">new</span> FoodOrder(c, r, items);
        paymentMethod.<span class="fn">pay</span>(order.getTotal());
        order.<span class="fn">updateStatus</span>(OrderStatus.ACCEPTED);
        <span class="cm">// Notify restaurant (Observer pattern)</span>
        <span class="kw">return</span> order;
    }

    <span class="kw">public void</span> <span class="fn">assignDelivery</span>(FoodOrder order) {
        DeliveryAgent agent = <span class="fn">findNearestAgent</span>(order.getRestaurant().getLocation());
        order.<span class="fn">assignAgent</span>(agent);
        agent.setAvailable(<span class="kw">false</span>);
    }

    <span class="kw">private</span> DeliveryAgent <span class="fn">findNearestAgent</span>(Location loc) {
        <span class="kw">return</span> agents.stream()
            .filter(DeliveryAgent::isAvailable)
            .min(Comparator.comparingDouble(a -> a.getCurrentLocation().<span class="fn">distanceTo</span>(loc)))
            .orElseThrow(() -> <span class="kw">new</span> RuntimeException(<span class="st">"No agents available"</span>));
    }
}</code></pre>

<div class="section-divider"></div>
<h3>üéâ Course Complete!</h3>
<p>You've learned everything needed to crack LLD interviews at FAANG:</p>
<ul>
<li>‚úÖ Java from absolute zero</li>
<li>‚úÖ OOP & SOLID principles</li>
<li>‚úÖ 12+ Design Patterns</li>
<li>‚úÖ UML Class Diagrams</li>
<li>‚úÖ 45-minute interview framework</li>
<li>‚úÖ 15 most-asked LLD problems with full solutions</li>
</ul>
<div class="callout interview"><div class="callout-title">üéØ Study Plan</div>
<p><strong>Week 1:</strong> Module 1 (Java) + Module 2 (SOLID)<br>
<strong>Week 2:</strong> Module 3 (Patterns) + Module 4 (UML/Framework)<br>
<strong>Week 3-4:</strong> Solve all 15 problems without looking at solutions<br>
<strong>Daily:</strong> Pick 1 problem, set a 45-min timer, solve it on paper first!</p></div>
`
    }
]
    }
];

// Navigation + Progress
let currentTopic = null;
const progress = JSON.parse(localStorage.getItem('lld_progress') || '{}');

function buildNav() {
  const nav = document.getElementById('navList');
  nav.innerHTML = '';
  COURSE.forEach((mod, mi) => {
    const modDiv = document.createElement('div');
    modDiv.className = 'nav-module';
    const header = document.createElement('div');
    header.className = 'nav-module-header';
    header.innerHTML = `<span class="arrow">‚ñ∂</span><span class="mod-num">M${mi+1}</span>${mod.title}`;
    header.onclick = () => { header.classList.toggle('expanded'); items.classList.toggle('show'); };
    modDiv.appendChild(header);
    const items = document.createElement('div');
    items.className = 'nav-items';
    mod.topics.forEach((topic, ti) => {
      const key = `${mi}-${ti}`;
      const item = document.createElement('div');
      item.className = 'nav-item' + (progress[key] ? ' completed' : '') + (currentTopic === key ? ' active' : '');
      item.innerHTML = `<div class="check" data-key="${key}">${progress[key] ? '‚úì' : ''}</div><span>${topic.title}</span>`;
      item.querySelector('.check').onclick = (e) => { e.stopPropagation(); toggleComplete(key); };
      item.onclick = () => loadTopic(mi, ti);
      items.appendChild(item);
    });
    modDiv.appendChild(items);
    nav.appendChild(modDiv);
  });
  updateProgress();
}

function toggleComplete(key) {
  progress[key] = !progress[key];
  localStorage.setItem('lld_progress', JSON.stringify(progress));
  buildNav();
}

function updateProgress() {
  let total = 0, done = 0;
  COURSE.forEach((m, mi) => m.topics.forEach((t, ti) => { total++; if (progress[`${mi}-${ti}`]) done++; }));
  const pct = total ? Math.round(done/total*100) : 0;
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressText').textContent = `${pct}% Complete (${done}/${total} topics)`;
}

function loadTopic(mi, ti) {
  currentTopic = `${mi}-${ti}`;
  const mod = COURSE[mi];
  const topic = mod.topics[ti];
  const ca = document.getElementById('contentArea');
  ca.innerHTML = `<div class="module-badge">Module ${mi+1}: ${mod.title}</div><h2>${topic.title}</h2>${topic.content}`;
  document.querySelector('.main').scrollTop = 0;
  // Expand sidebar module
  const headers = document.querySelectorAll('.nav-module-header');
  const itemDivs = document.querySelectorAll('.nav-items');
  headers.forEach((h, i) => { if (i === mi) { h.classList.add('expanded'); itemDivs[i].classList.add('show'); } });
  buildNav();
  // Close mobile sidebar
  document.querySelector('.sidebar').classList.remove('open');
}

function showWelcome() {
  document.getElementById('contentArea').innerHTML = `
    <div style="text-align:center;padding:60px 20px">
      <div style="font-size:64px;margin-bottom:20px">‚ö°</div>
      <h2 style="font-size:36px;margin-bottom:16px;background:linear-gradient(135deg,#6c5ce7,#00cec9);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent">LLD Mastery Course</h2>
      <p style="font-size:18px;color:#9999b0;max-width:600px;margin:0 auto 32px">From absolute zero to cracking the Low-Level Design round at FAANG & top tech companies.</p>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;max-width:700px;margin:0 auto 40px">
        <div style="background:#15152a;border:1px solid #2a2a40;border-radius:12px;padding:20px;text-align:center">
          <div style="font-size:28px;margin-bottom:8px">‚òï</div>
          <div style="font-weight:700;margin-bottom:4px">Module 1</div>
          <div style="font-size:12px;color:#9999b0">Java from Zero</div>
        </div>
        <div style="background:#15152a;border:1px solid #2a2a40;border-radius:12px;padding:20px;text-align:center">
          <div style="font-size:28px;margin-bottom:8px">üèóÔ∏è</div>
          <div style="font-weight:700;margin-bottom:4px">Module 2</div>
          <div style="font-size:12px;color:#9999b0">OOP & SOLID</div>
        </div>
        <div style="background:#15152a;border:1px solid #2a2a40;border-radius:12px;padding:20px;text-align:center">
          <div style="font-size:28px;margin-bottom:8px">üé®</div>
          <div style="font-weight:700;margin-bottom:4px">Module 3</div>
          <div style="font-size:12px;color:#9999b0">Design Patterns</div>
        </div>
        <div style="background:#15152a;border:1px solid #2a2a40;border-radius:12px;padding:20px;text-align:center">
          <div style="font-size:28px;margin-bottom:8px">üìê</div>
          <div style="font-weight:700;margin-bottom:4px">Module 4</div>
          <div style="font-size:12px;color:#9999b0">UML & Interview Framework</div>
        </div>
        <div style="background:#15152a;border:1px solid #2a2a40;border-radius:12px;padding:20px;text-align:center">
          <div style="font-size:28px;margin-bottom:8px">üî•</div>
          <div style="font-weight:700;margin-bottom:4px">Module 5</div>
          <div style="font-size:12px;color:#9999b0">15 FAANG LLD Problems</div>
        </div>
      </div>
      <p style="font-size:14px;color:#666680">üëà Click any topic in the sidebar to begin your journey</p>
    </div>`;
}

// Init
showWelcome();
buildNav();
</script>
</body>
</html>